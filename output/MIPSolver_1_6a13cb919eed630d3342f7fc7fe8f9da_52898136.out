1.NAME: MIPSolver
2.PARAMS: {'use_lazy_constraints': True}
3.INSTANCE: /home/wx350715/Kobra/rehabiliation-admission-scheduling/data/comp_study_002/instance_2_30.txt
4.REPETITION: 1
Current directory: /home/wx350715/Kobra/rehabiliation-admission-scheduling
[34m2025-01-01 18:43:01,410 - DEBUG - Solver: <class 'src.solvers.mip.MIPSolver'>[0m
[34m2025-01-01 18:43:01,411 - DEBUG - Args: {'use_lazy_constraints': True}[0m
[34m2025-01-01 18:43:01,411 - DEBUG - File path /home/wx350715/Kobra/rehabiliation-admission-scheduling/data/comp_study_002/instance_2_30.txt[0m
[34m2025-01-01 18:43:01,411 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-01 18:43:01,411 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-01 18:43:01,411 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-01 18:43:01,411 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-01 18:43:01,411 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-01 18:43:01,411 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-01 18:43:01,411 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-01 18:43:01,411 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-01 18:43:01,411 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-01 18:43:01,411 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-01 18:43:01,411 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-01 18:43:01,411 - DEBUG - ADD RESOURCE_GROUPS[0m
[34m2025-01-01 18:43:01,411 - DEBUG - ADD RESOURCE_GROUPS[0m
[34m2025-01-01 18:43:01,411 - DEBUG - ADD RESOURCE_GROUPS[0m
[34m2025-01-01 18:43:01,411 - DEBUG - ADD RESOURCE_GROUPS[0m
[34m2025-01-01 18:43:01,411 - DEBUG - ADD RESOURCE_GROUPS[0m
[34m2025-01-01 18:43:01,412 - DEBUG - ADD RESOURCES[0m
[34m2025-01-01 18:43:01,412 - DEBUG - ADD RESOURCES[0m
[34m2025-01-01 18:43:01,412 - DEBUG - ADD RESOURCES[0m
[34m2025-01-01 18:43:01,412 - DEBUG - ADD RESOURCES[0m
[34m2025-01-01 18:43:01,412 - DEBUG - ADD RESOURCES[0m
[34m2025-01-01 18:43:01,412 - DEBUG - ADD RESOURCES[0m
[34m2025-01-01 18:43:01,412 - DEBUG - ADD RESOURCES[0m
[34m2025-01-01 18:43:01,412 - DEBUG - ADD RESOURCES[0m
[34m2025-01-01 18:43:01,412 - DEBUG - ADD RESOURCES[0m
[34m2025-01-01 18:43:01,412 - DEBUG - ADD RESOURCES[0m
[34m2025-01-01 18:43:01,412 - DEBUG - ADD TREATMENTS[0m
[34m2025-01-01 18:43:01,412 - DEBUG - ADD TREATMENTS[0m
[34m2025-01-01 18:43:01,412 - DEBUG - ADD TREATMENTS[0m
[34m2025-01-01 18:43:01,413 - DEBUG - ADD TREATMENTS[0m
[34m2025-01-01 18:43:01,413 - DEBUG - ADD TREATMENTS[0m
[34m2025-01-01 18:43:01,413 - DEBUG - ADD TREATMENTS[0m
[34m2025-01-01 18:43:01,413 - DEBUG - ADD TREATMENTS[0m
[34m2025-01-01 18:43:01,413 - DEBUG - ADD TREATMENTS[0m
[34m2025-01-01 18:43:01,413 - DEBUG - ADD TREATMENTS[0m
[34m2025-01-01 18:43:01,413 - DEBUG - ADD TREATMENTS[0m
[34m2025-01-01 18:43:01,413 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,413 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,413 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,413 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,414 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,414 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,414 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,414 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,414 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,414 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,414 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,414 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,414 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,414 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,414 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,414 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,415 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,415 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,415 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,415 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,415 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,415 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,415 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,416 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,416 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,416 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,416 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,416 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,417 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,417 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,417 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,417 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,417 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,417 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,417 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,417 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,417 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,417 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,417 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,418 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,418 - DEBUG - Instance data:[0m
[34m2025-01-01 18:43:01,418 - DEBUG - Number of patients: 40[0m
[34m2025-01-01 18:43:01,418 - DEBUG - Number of beds: 40[0m
[34m2025-01-01 18:43:01,418 - DEBUG - Average number of treatments per patient: 24.5[0m
[34m2025-01-01 18:43:01,418 - DEBUG - Average number of treatment per stayed day: 1.3611111111111112[0m
[34m2025-01-01 18:43:01,418 - DEBUG - Number of treatments: 980[0m
[34m2025-01-01 18:43:01,418 - DEBUG - Number of resources: 10[0m
[34m2025-01-01 18:43:01,418 - DEBUG - Number of resource groups: 5[0m
[34m2025-01-01 18:43:01,418 - DEBUG - Number of resource hours needed per all treatment by RG(rooms): 52.50000000000001[0m
[34m2025-01-01 18:43:01,418 - DEBUG - Number of resource hours needed per all treatment by RG(physiotherapist): 20.0[0m
[34m2025-01-01 18:43:01,418 - DEBUG - Number of resource hours needed per all treatment by RG(therapists): 24.374999999999986[0m
[34m2025-01-01 18:43:01,418 - DEBUG - Number of resource hours needed per all treatment by RG(sport_room): 11.875[0m
[34m2025-01-01 18:43:01,418 - DEBUG - Number of resource hours needed per all treatment by RG(language_therapist): 1.4999999999999998[0m
[32m2025-01-01 18:43:01,418 - INFO - {'solver': 'MIPSolver', 'args': {'use_lazy_constraints': True, 'enforce_min_treatments_per_day': True, 'enforce_max_treatments_per_e_w': True, 'enforce_min_patients_per_treatment': True, 'log_to_console': True}}[0m
[34m2025-01-01 18:43:01,418 - DEBUG - Setting options: MIPSolver[0m
[34m2025-01-01 18:43:01,418 - DEBUG -  ---- use_lazy_constraints to True[0m
[34m2025-01-01 18:43:01,418 - DEBUG - Setting options: Solver[0m
[34m2025-01-01 18:43:01,418 - DEBUG -  ---- number_of_threads to 4 (default)[0m
[34m2025-01-01 18:43:01,418 - DEBUG -  ---- treatment_value to 0 (default)[0m
[34m2025-01-01 18:43:01,418 - DEBUG -  ---- delay_value to 1 (default)[0m
[34m2025-01-01 18:43:01,418 - DEBUG -  ---- missing_treatment_value to 4 (default)[0m
[34m2025-01-01 18:43:01,418 - DEBUG -  ---- enforce_min_treatments_per_day to True[0m
[34m2025-01-01 18:43:01,419 - DEBUG -  ---- enforce_max_treatments_per_e_w to True[0m
[34m2025-01-01 18:43:01,419 - DEBUG -  ---- enforce_min_patients_per_treatment to True[0m
[34m2025-01-01 18:43:01,419 - DEBUG -  ---- log_to_console to True[0m
[34m2025-01-01 18:43:01,419 - DEBUG -  ---- log_to_file to True (default)[0m
[34m2025-01-01 18:43:01,419 - DEBUG -  ---- no_rel_heur_time to 1 (default)[0m
[32m2025-01-01 18:43:01,434 - INFO - Create model: MIPSolver[0m
Set parameter TSPort to value 50039
Set parameter TokenServer to value "license.itc.rwth-aachen.de"
Set parameter Threads to value 4
Set parameter Cuts to value 0
Set parameter NoRelHeurTime to value 1
Set parameter LazyConstraints to value 1
[34m2025-01-01 18:43:03,494 - DEBUG - Variables created.[0m
[34m2025-01-01 18:43:05,980 - DEBUG - Constraint (p1) created.[0m
[34m2025-01-01 18:43:06,369 - DEBUG - Constraint (when_admitted) created.[0m
[34m2025-01-01 18:43:06,557 - DEBUG - Constraint (p3) created.[0m
[34m2025-01-01 18:43:06,560 - DEBUG - Constraint (p4) created.[0m
[34m2025-01-01 18:43:06,560 - DEBUG - Constraint (p7) created.[0m
[34m2025-01-01 18:43:06,646 - DEBUG - Constraint (r3) created.[0m
[34m2025-01-01 18:43:07,467 - DEBUG - Constraint (r4) created.[0m
[34m2025-01-01 18:43:08,470 - DEBUG - Constraint (a1) created.[0m
[34m2025-01-01 18:43:08,544 - DEBUG - Constraint (a4) created.[0m
[34m2025-01-01 18:43:08,563 - DEBUG - Constraint (a5) created.[0m
[34m2025-01-01 18:43:08,582 - DEBUG - Constraint (a5) created.[0m
[34m2025-01-01 18:43:08,582 - DEBUG - Constraint (already_admitted) created.[0m
[32m2025-01-01 18:43:09,585 - INFO - Time to create model: 8.151[0m
[32m2025-01-01 18:43:09,586 - INFO - Solving model: MIPSolver[0m
Gurobi Optimizer version 10.0.0 build v10.0.0rc2 (linux64)

CPU model: Intel(R) Xeon(R) Platinum 8468, instruction set [SSE2|AVX|AVX2|AVX512]
Thread count: 96 physical cores, 96 logical processors, using up to 4 threads

Optimize a model with 441828 rows, 336031 columns and 2123336 nonzeros
Model fingerprint: 0x1d7aa65c
Variable types: 2 continuous, 336029 integer (336029 binary)
Coefficient statistics:
  Matrix range     [1e+00, 1e+01]
  Objective range  [1e+00, 1e+01]
  Bounds range     [1e+00, 1e+00]
  RHS range        [1e+00, 4e+03]
Presolve removed 186955 rows and 121528 columns (presolve time = 5s) ...
Presolve removed 186955 rows and 123988 columns (presolve time = 10s) ...
Presolve removed 191008 rows and 124036 columns (presolve time = 15s) ...
Presolve removed 190859 rows and 123887 columns
Presolve time: 18.16s
Presolved: 250969 rows, 212144 columns, 1162550 nonzeros
Variable types: 0 continuous, 212144 integer (211994 binary)
Starting NoRel heuristic
Found phase-1 solution: relaxation 83
Found phase-1 solution: relaxation 81
Root relaxation presolved: 250731 rows, 212382 columns, 1146466 nonzeros

Deterministic concurrent LP optimizer: primal simplex, dual simplex, and barrier
Showing barrier log only...

Root barrier log...

Ordering time: 4.06s

Barrier statistics:
 Dense cols : 10
 AA' NZ     : 1.429e+06
 Factor NZ  : 1.309e+07 (roughly 170 MB of memory)
 Factor Ops : 4.626e+09 (less than 1 second per iteration)
 Threads    : 2

                  Objective                Residual
Iter       Primal          Dual         Primal    Dual     Compl     Time
   0  -3.71436726e+06 -3.44722078e+05  7.14e+04 6.95e-01  2.63e+02    32s
   1  -2.85769252e+06 -3.54661188e+05  5.49e+04 5.64e+00  1.98e+02    33s
   2  -1.73717671e+06 -3.77393855e+05  3.35e+04 3.48e+00  1.22e+02    34s
   3  -5.65396191e+05 -4.08020766e+05  1.10e+04 8.81e-13  4.23e+01    35s
   4  -1.21637640e+05 -3.09408400e+05  2.38e+03 1.85e-13  9.64e+00    37s
   5  -2.00307505e+04 -1.45359410e+05  4.19e+02 9.09e-13  1.96e+00    38s
   6  -1.24456142e+04 -9.56584195e+04  2.70e+02 4.55e-13  1.21e+00    40s
   7  -7.81529127e+03 -7.59817520e+04  1.78e+02 2.91e-13  8.34e-01    41s
   8  -3.89628994e+03 -5.92894114e+04  1.02e+02 2.20e-13  5.38e-01    42s
   9  -1.57026444e+03 -3.59012360e+04  5.64e+01 1.10e-13  2.96e-01    43s
  10   1.82870134e+02 -2.24072539e+04  2.23e+01 6.17e-14  1.53e-01    44s
  11   1.07715320e+03 -1.01446172e+04  4.81e+00 2.56e-14  6.06e-02    45s
  12   1.27960753e+03 -1.52340199e+03  6.73e-01 2.02e-14  1.39e-02    46s
  13   1.29813423e+03  1.06119648e+03  8.51e-02 1.26e-14  1.17e-03    47s
  14   1.30000624e+03  1.29875069e+03  1.76e-04 7.11e-15  6.09e-06    48s
  15   1.30000002e+03  1.29999875e+03  5.97e-13 2.13e-14  6.09e-09    49s
  16   1.30000000e+03  1.30000000e+03  2.42e-13 1.42e-14  6.09e-12    50s

Barrier solved model in 16 iterations and 50.41 seconds (17.14 work units)
Optimal objective 1.30000000e+03


Root crossover log...

     903 DPushes remaining with DInf 0.0000000e+00                51s
       0 DPushes remaining with DInf 0.0000000e+00                51s

   47181 PPushes remaining with PInf 0.0000000e+00                51s
    6199 PPushes remaining with PInf 0.0000000e+00                55s
    3544 PPushes remaining with PInf 0.0000000e+00                60s
    1971 PPushes remaining with PInf 0.0000000e+00                66s
     915 PPushes remaining with PInf 0.0000000e+00                71s
     216 PPushes remaining with PInf 0.0000000e+00                75s
       0 PPushes remaining with PInf 0.0000000e+00                77s

  Push phase complete: Pinf 0.0000000e+00, Dinf 2.4605172e-10     77s


Root simplex log...

Iteration    Objective       Primal Inf.    Dual Inf.      Time
   48035    1.3000000e+03   0.000000e+00   0.000000e+00     77s
Concurrent spin time: 0.01s

Solved with barrier
   48035    1.3000000e+03   0.000000e+00   0.000000e+00     78s

Use crossover to convert LP symmetric solution to basic solution...

Root crossover log...

    9279 DPushes remaining with DInf 0.0000000e+00                79s

   27482 PPushes remaining with PInf 0.0000000e+00                79s
    4773 PPushes remaining with PInf 0.0000000e+00                80s
    2804 PPushes remaining with PInf 0.0000000e+00                86s
    1662 PPushes remaining with PInf 0.0000000e+00                90s
     528 PPushes remaining with PInf 0.0000000e+00                96s
       0 PPushes remaining with PInf 0.0000000e+00                99s

  Push phase complete: Pinf 0.0000000e+00, Dinf 4.4279695e-10     99s


Root simplex log...

Iteration    Objective       Primal Inf.    Dual Inf.      Time
   75520    1.3000000e+03   0.000000e+00   0.000000e+00     99s
   75520    1.3000000e+03   0.000000e+00   0.000000e+00    100s

Root relaxation: objective 1.300000e+03, 75520 iterations, 75.94 seconds (25.35 work units)

    Nodes    |    Current Node    |     Objective Bounds      |     Work
 Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time

     0     0 1300.00000    0 20527          - 1300.00000      -     -  238s
     0     0 1300.00000    0 20527          - 1300.00000      -     -  391s
     0     2 1300.00000    0 20527          - 1300.00000      -     -  843s
     1     4 1300.00000    1 9472          - 1300.00000      - 129343 2478s
