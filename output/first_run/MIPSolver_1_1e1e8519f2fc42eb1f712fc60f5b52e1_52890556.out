1.NAME: MIPSolver
2.PARAMS: {'use_lazy_constraints': False}
3.INSTANCE: /home/wx350715/Kobra/rehabiliation-admission-scheduling/data/comp_study_002/instance_6_30.txt
4.REPETITION: 1
Current directory: /home/wx350715/Kobra/rehabiliation-admission-scheduling
[34m2025-01-01 15:58:35,049 - DEBUG - Solver: <class 'src.solvers.mip.MIPSolver'>[0m
[34m2025-01-01 15:58:35,049 - DEBUG - Args: {'use_lazy_constraints': False}[0m
[34m2025-01-01 15:58:35,049 - DEBUG - File path /home/wx350715/Kobra/rehabiliation-admission-scheduling/data/comp_study_002/instance_6_30.txt[0m
[34m2025-01-01 15:58:35,050 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-01 15:58:35,050 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-01 15:58:35,050 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-01 15:58:35,050 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-01 15:58:35,050 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-01 15:58:35,050 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-01 15:58:35,050 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-01 15:58:35,050 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-01 15:58:35,050 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-01 15:58:35,050 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-01 15:58:35,050 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-01 15:58:35,050 - DEBUG - ADD RESOURCE_GROUPS[0m
[34m2025-01-01 15:58:35,050 - DEBUG - ADD RESOURCE_GROUPS[0m
[34m2025-01-01 15:58:35,050 - DEBUG - ADD RESOURCE_GROUPS[0m
[34m2025-01-01 15:58:35,050 - DEBUG - ADD RESOURCE_GROUPS[0m
[34m2025-01-01 15:58:35,050 - DEBUG - ADD RESOURCES[0m
[34m2025-01-01 15:58:35,050 - DEBUG - ADD RESOURCES[0m
[34m2025-01-01 15:58:35,051 - DEBUG - ADD RESOURCES[0m
[34m2025-01-01 15:58:35,051 - DEBUG - ADD RESOURCES[0m
[34m2025-01-01 15:58:35,051 - DEBUG - ADD RESOURCES[0m
[34m2025-01-01 15:58:35,051 - DEBUG - ADD RESOURCES[0m
[34m2025-01-01 15:58:35,051 - DEBUG - ADD RESOURCES[0m
[34m2025-01-01 15:58:35,051 - DEBUG - ADD RESOURCES[0m
[34m2025-01-01 15:58:35,051 - DEBUG - ADD RESOURCES[0m
[34m2025-01-01 15:58:35,051 - DEBUG - ADD RESOURCES[0m
[34m2025-01-01 15:58:35,051 - DEBUG - ADD TREATMENTS[0m
[34m2025-01-01 15:58:35,051 - DEBUG - ADD TREATMENTS[0m
[34m2025-01-01 15:58:35,051 - DEBUG - ADD TREATMENTS[0m
[34m2025-01-01 15:58:35,052 - DEBUG - ADD TREATMENTS[0m
[34m2025-01-01 15:58:35,052 - DEBUG - ADD TREATMENTS[0m
[34m2025-01-01 15:58:35,052 - DEBUG - ADD TREATMENTS[0m
[34m2025-01-01 15:58:35,052 - DEBUG - ADD TREATMENTS[0m
[34m2025-01-01 15:58:35,052 - DEBUG - ADD TREATMENTS[0m
[34m2025-01-01 15:58:35,052 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 15:58:35,052 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 15:58:35,052 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 15:58:35,052 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 15:58:35,052 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 15:58:35,053 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 15:58:35,053 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 15:58:35,053 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 15:58:35,053 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 15:58:35,053 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 15:58:35,053 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 15:58:35,053 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 15:58:35,053 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 15:58:35,053 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 15:58:35,054 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 15:58:35,054 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 15:58:35,054 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 15:58:35,054 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 15:58:35,054 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 15:58:35,054 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 15:58:35,054 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 15:58:35,054 - DEBUG - Instance data:[0m
[34m2025-01-01 15:58:35,054 - DEBUG - Number of patients: 21[0m
[34m2025-01-01 15:58:35,054 - DEBUG - Number of beds: 36[0m
[34m2025-01-01 15:58:35,054 - DEBUG - Average number of treatments per patient: 32.38095238095238[0m
[34m2025-01-01 15:58:35,056 - DEBUG - Average number of treatment per stayed day: 2.3859649122807016[0m
[34m2025-01-01 15:58:35,056 - DEBUG - Number of treatments: 680[0m
[34m2025-01-01 15:58:35,056 - DEBUG - Number of resources: 10[0m
[34m2025-01-01 15:58:35,056 - DEBUG - Number of resource groups: 4[0m
[34m2025-01-01 15:58:35,056 - DEBUG - Number of resource hours needed per all treatment by RG(therapists): 19.704166666666676[0m
[34m2025-01-01 15:58:35,056 - DEBUG - Number of resource hours needed per all treatment by RG(rooms): 35.95416666666666[0m
[34m2025-01-01 15:58:35,056 - DEBUG - Number of resource hours needed per all treatment by RG(physiotherapist): 15.5[0m
[34m2025-01-01 15:58:35,056 - DEBUG - Number of resource hours needed per all treatment by RG(sport_room): 6.75[0m
[32m2025-01-01 15:58:35,056 - INFO - {'solver': 'MIPSolver', 'args': {'use_lazy_constraints': True, 'enforce_min_treatments_per_day': True, 'enforce_max_treatments_per_e_w': True, 'enforce_min_patients_per_treatment': True, 'log_to_console': True}}[0m
[34m2025-01-01 15:58:35,056 - DEBUG - Setting options: MIPSolver[0m
[34m2025-01-01 15:58:35,056 - DEBUG -  ---- use_lazy_constraints to True[0m
[34m2025-01-01 15:58:35,056 - DEBUG - Setting options: Solver[0m
[34m2025-01-01 15:58:35,056 - DEBUG -  ---- number_of_threads to 4 (default)[0m
[34m2025-01-01 15:58:35,056 - DEBUG -  ---- treatment_value to 0 (default)[0m
[34m2025-01-01 15:58:35,056 - DEBUG -  ---- delay_value to 1 (default)[0m
[34m2025-01-01 15:58:35,056 - DEBUG -  ---- missing_treatment_value to 4 (default)[0m
[34m2025-01-01 15:58:35,056 - DEBUG -  ---- enforce_min_treatments_per_day to True[0m
[34m2025-01-01 15:58:35,056 - DEBUG -  ---- enforce_max_treatments_per_e_w to True[0m
[34m2025-01-01 15:58:35,056 - DEBUG -  ---- enforce_min_patients_per_treatment to True[0m
[34m2025-01-01 15:58:35,056 - DEBUG -  ---- log_to_console to True[0m
[34m2025-01-01 15:58:35,056 - DEBUG -  ---- log_to_file to True (default)[0m
[34m2025-01-01 15:58:35,056 - DEBUG -  ---- no_rel_heur_time to 1 (default)[0m
[32m2025-01-01 15:58:35,074 - INFO - Create model: MIPSolver[0m
Set parameter TSPort to value 50039
Set parameter TokenServer to value "license.itc.rwth-aachen.de"
Set parameter Threads to value 4
Set parameter Cuts to value 0
Set parameter NoRelHeurTime to value 1
Set parameter LazyConstraints to value 1
[34m2025-01-01 15:58:36,364 - DEBUG - Variables created.[0m
[34m2025-01-01 15:58:38,045 - DEBUG - Constraint (p1) created.[0m
[34m2025-01-01 15:58:38,292 - DEBUG - Constraint (when_admitted) created.[0m
[34m2025-01-01 15:58:38,409 - DEBUG - Constraint (p3) created.[0m
[34m2025-01-01 15:58:38,411 - DEBUG - Constraint (p4) created.[0m
[34m2025-01-01 15:58:38,411 - DEBUG - Constraint (p7) created.[0m
[34m2025-01-01 15:58:38,495 - DEBUG - Constraint (r3) created.[0m
[34m2025-01-01 15:58:39,139 - DEBUG - Constraint (r4) created.[0m
[34m2025-01-01 15:58:39,792 - DEBUG - Constraint (a1) created.[0m
[34m2025-01-01 15:58:39,848 - DEBUG - Constraint (a4) created.[0m
[34m2025-01-01 15:58:39,860 - DEBUG - Constraint (a5) created.[0m
[34m2025-01-01 15:58:39,873 - DEBUG - Constraint (a5) created.[0m
[34m2025-01-01 15:58:39,873 - DEBUG - Constraint (already_admitted) created.[0m
[32m2025-01-01 15:58:40,255 - INFO - Time to create model: 5.181[0m
[32m2025-01-01 15:58:40,255 - INFO - Solving model: MIPSolver[0m
Gurobi Optimizer version 10.0.0 build v10.0.0rc2 (linux64)

CPU model: Intel(R) Xeon(R) Platinum 8468, instruction set [SSE2|AVX|AVX2|AVX512]
Thread count: 96 physical cores, 96 logical processors, using up to 4 threads

Optimize a model with 283384 rows, 218527 columns and 1297648 nonzeros
Model fingerprint: 0x67dfe6f2
Variable types: 2 continuous, 218525 integer (218525 binary)
Coefficient statistics:
  Matrix range     [1e+00, 1e+01]
  Objective range  [1e+00, 1e+01]
  Bounds range     [1e+00, 1e+00]
  RHS range        [1e+00, 3e+03]
Presolve removed 127486 rows and 83664 columns (presolve time = 5s) ...
Presolve removed 129990 rows and 84924 columns (presolve time = 10s) ...
Presolve removed 129948 rows and 84882 columns
Presolve time: 12.41s
Presolved: 153436 rows, 133645 columns, 701800 nonzeros
Variable types: 0 continuous, 133645 integer (133602 binary)
Starting NoRel heuristic
Found phase-1 solution: relaxation 74
Found phase-1 solution: relaxation 64
Root relaxation presolved: 153313 rows, 133768 columns, 691147 nonzeros

Deterministic concurrent LP optimizer: primal simplex, dual simplex, and barrier
Showing barrier log only...

Root barrier log...

Ordering time: 2.56s

Barrier statistics:
 Dense cols : 12
 AA' NZ     : 7.817e+05
 Factor NZ  : 5.393e+06 (roughly 90 MB of memory)
 Factor Ops : 9.464e+08 (less than 1 second per iteration)
 Threads    : 2

                  Objective                Residual
Iter       Primal          Dual         Primal    Dual     Compl     Time
   0  -1.95669859e+06 -2.59447364e+05  5.02e+04 1.48e+00  2.68e+02    23s
   1  -1.45846070e+06 -2.77459829e+05  3.75e+04 5.47e+00  1.96e+02    23s
   2  -8.05224483e+05 -3.00759437e+05  2.08e+04 2.88e+00  1.11e+02    24s
   3  -2.98279580e+05 -3.13119586e+05  7.76e+03 4.18e-01  4.23e+01    24s
   4  -5.40898376e+04 -2.29496774e+05  1.43e+03 3.71e-04  8.53e+00    25s
   5  -2.12960917e+04 -1.30763374e+05  5.78e+02 6.11e-04  3.42e+00    25s
   6  -1.04513652e+04 -9.10251725e+04  2.93e+02 3.02e-04  1.82e+00    26s
   7  -5.61361203e+03 -7.33561379e+04  1.64e+02 2.73e-04  1.14e+00    26s
   8  -3.10160911e+03 -4.72602648e+04  9.82e+01 1.42e-04  6.68e-01    27s
   9  -1.33122106e+03 -2.45611010e+04  5.20e+01 8.57e-05  3.22e-01    27s
  10   2.68674853e+02 -1.05823548e+04  1.07e+01 4.49e-05  9.98e-02    28s
  11   6.02847413e+02 -3.53513924e+03  1.91e+00 9.74e-06  3.11e-02    28s
  12   6.54066128e+02 -3.27825638e+02  4.83e-01 6.68e-07  7.05e-03    29s
  13   6.65949712e+02  4.74812015e+02  1.05e-01 7.64e-06  1.36e-03    29s
  14   6.67791767e+02  6.14175295e+02  3.36e-02 2.12e-06  3.80e-04    30s
  15   6.68167286e+02  6.50697820e+02  1.69e-02 8.13e-07  1.25e-04    30s
  16   6.68303448e+02  6.58586464e+02  1.14e-02 4.38e-07  7.03e-05    31s
  17   6.68400765e+02  6.61886382e+02  7.02e-03 2.71e-07  4.69e-05    31s
  18   6.68529757e+02  6.64961119e+02  1.31e-03 1.57e-07  2.50e-05    32s
  19   6.68555766e+02  6.67884407e+02  1.17e-04 3.42e-08  4.67e-06    32s
  20   6.68555626e+02  6.68530124e+02  5.27e-07 4.35e-10  1.76e-07    33s
  21   6.68555556e+02  6.68555530e+02  3.17e-13 2.22e-14  1.76e-10    33s
  22   6.68555556e+02  6.68555556e+02  4.97e-13 6.66e-14  1.76e-13    34s

Barrier solved model in 22 iterations and 33.84 seconds (10.30 work units)
Optimal objective 6.68555556e+02


Root crossover log...

     653 DPushes remaining with DInf 0.0000000e+00                34s
       0 DPushes remaining with DInf 0.0000000e+00                34s

   35432 PPushes remaining with PInf 0.0000000e+00                34s
    8370 PPushes remaining with PInf 0.0000000e+00                35s
     904 PPushes remaining with PInf 0.0000000e+00                40s
       0 PPushes remaining with PInf 0.0000000e+00                42s

  Push phase complete: Pinf 0.0000000e+00, Dinf 2.6481182e-10     42s


Root simplex log...

Iteration    Objective       Primal Inf.    Dual Inf.      Time
   36075    6.6855556e+02   0.000000e+00   0.000000e+00     42s
Concurrent spin time: 2.72s (can be avoided by choosing Method=3)

Solved with barrier
   36075    6.6855556e+02   0.000000e+00   0.000000e+00     42s

Use crossover to convert LP symmetric solution to basic solution...

Root crossover log...

    2658 DPushes remaining with DInf 0.0000000e+00                42s
       0 DPushes remaining with DInf 0.0000000e+00                42s

   18858 PPushes remaining with PInf 0.0000000e+00                42s
     725 PPushes remaining with PInf 0.0000000e+00                45s
       0 PPushes remaining with PInf 0.0000000e+00                48s

  Push phase complete: Pinf 0.0000000e+00, Dinf 3.1941377e-10     48s


Root simplex log...

Iteration    Objective       Primal Inf.    Dual Inf.      Time
   54937    6.6855556e+02   0.000000e+00   0.000000e+00     48s
   54937    6.6855556e+02   0.000000e+00   0.000000e+00     49s

Root relaxation: objective 6.685556e+02, 54937 iterations, 30.78 seconds (8.76 work units)

    Nodes    |    Current Node    |     Objective Bounds      |     Work
 Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time

     0     0  668.55556    0 14185          -  668.55556      -     -  112s
     0     0  668.55556    0 14185          -  668.55556      -     -  174s
     0     2  668.55556    0 14185          -  668.55556      -     -  401s
     1     4  669.41667    1 5506          -  668.71429      - 93705  934s
     3     8  669.41667    2 3654          -  669.41667      - 53567 1185s
     7    12  669.41667    3 2972          -  669.41667      - 33717 1298s
    11    16  669.41667    4 2565          -  669.41667      - 25236 1365s
    15    20  669.41667    5 2389          -  669.41667      - 20138 1370s
    23    31  669.41667    7 2316          -  669.41667      - 14164 1381s
    30    39  669.41667    8 2283          -  669.41667      - 11322 1385s
    38    65  669.41667   10 2248          -  669.41667      -  9139 1397s
    64   121  669.41667   17 2092          -  669.41667      -  5889 1420s
   122   206  669.41667   21 2056          -  669.41667      -  3583 1450s
   207   293  669.41667   24 1989          -  669.41667      -  2470 1479s
   294   401  669.41667   25 1987          -  669.41667      -  1976 1511s
   402   507  669.41667   27 1980          -  669.41667      -  1668 1540s
   508   606  669.41667   30 1941          -  669.41667      -  1461 1573s
   607   691  669.41667   34 1904          -  669.41667      -  1364 1613s
   726   765  669.41667   38 2025          -  669.41667      -  1288 1650s
   783   811  669.41667   52 1893          -  669.41667      -  1301 1706s
   835   917  669.41667   57 1980          -  669.41667      -  1409 1792s
   943  1043  669.41667   60 1868          -  669.41667      -  1470 2104s
  1069  1134  669.42029   64 2914          -  669.41667      -  1450 2438s
  1176  1367  669.42029   68 2454          -  669.41667      -  1455 2563s
  1413  1761  669.44118   80 1879          -  669.41667      -  1385 2623s
  1849  2056  689.00000  171  180          -  669.41667      -  1136 2697s
  2249  2232  669.41667   12 1619          -  669.41667      -  1027 2783s
  2471  2285  688.00000  117 14185          -  669.41667      -  1006 3114s
  2473  2286  689.00000  251 22411          -  669.41667      -  1005 3512s
