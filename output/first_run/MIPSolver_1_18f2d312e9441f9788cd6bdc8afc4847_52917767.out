1.NAME: MIPSolver
2.PARAMS: {'use_lazy_constraints': False}
3.INSTANCE: /home/wx350715/Kobra/rehabiliation-admission-scheduling/data/comp_study_002/instance_1_less_prescriptions_30.txt
4.REPETITION: 1
Current directory: /home/wx350715/Kobra/rehabiliation-admission-scheduling
[34m2025-01-02 12:55:56,769 - DEBUG - Solver: <class 'src.solvers.mip.MIPSolver'>[0m
[34m2025-01-02 12:55:56,769 - DEBUG - Args: {'use_lazy_constraints': False}[0m
[34m2025-01-02 12:55:56,769 - DEBUG - File path /home/wx350715/Kobra/rehabiliation-admission-scheduling/data/comp_study_002/instance_1_less_prescriptions_30.txt[0m
[34m2025-01-02 12:55:56,774 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-02 12:55:56,774 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-02 12:55:56,774 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-02 12:55:56,774 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-02 12:55:56,774 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-02 12:55:56,774 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-02 12:55:56,775 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-02 12:55:56,775 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-02 12:55:56,775 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-02 12:55:56,775 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-02 12:55:56,775 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-02 12:55:56,775 - DEBUG - ADD RESOURCE_GROUPS[0m
[34m2025-01-02 12:55:56,775 - DEBUG - ADD RESOURCE_GROUPS[0m
[34m2025-01-02 12:55:56,775 - DEBUG - ADD RESOURCE_GROUPS[0m
[34m2025-01-02 12:55:56,775 - DEBUG - ADD RESOURCE_GROUPS[0m
[34m2025-01-02 12:55:56,775 - DEBUG - ADD RESOURCES[0m
[34m2025-01-02 12:55:56,775 - DEBUG - ADD RESOURCES[0m
[34m2025-01-02 12:55:56,775 - DEBUG - ADD RESOURCES[0m
[34m2025-01-02 12:55:56,775 - DEBUG - ADD RESOURCES[0m
[34m2025-01-02 12:55:56,776 - DEBUG - ADD RESOURCES[0m
[34m2025-01-02 12:55:56,776 - DEBUG - ADD RESOURCES[0m
[34m2025-01-02 12:55:56,776 - DEBUG - ADD RESOURCES[0m
[34m2025-01-02 12:55:56,776 - DEBUG - ADD RESOURCES[0m
[34m2025-01-02 12:55:56,776 - DEBUG - ADD RESOURCES[0m
[34m2025-01-02 12:55:56,776 - DEBUG - ADD TREATMENTS[0m
[34m2025-01-02 12:55:56,776 - DEBUG - ADD TREATMENTS[0m
[34m2025-01-02 12:55:56,776 - DEBUG - ADD TREATMENTS[0m
[34m2025-01-02 12:55:56,776 - DEBUG - ADD TREATMENTS[0m
[34m2025-01-02 12:55:56,776 - DEBUG - ADD TREATMENTS[0m
[34m2025-01-02 12:55:56,777 - DEBUG - ADD TREATMENTS[0m
[34m2025-01-02 12:55:56,777 - DEBUG - ADD TREATMENTS[0m
[34m2025-01-02 12:55:56,777 - DEBUG - ADD TREATMENTS[0m
[34m2025-01-02 12:55:56,777 - DEBUG - ADD PATIENTS[0m
[34m2025-01-02 12:55:56,777 - DEBUG - ADD PATIENTS[0m
[34m2025-01-02 12:55:56,777 - DEBUG - ADD PATIENTS[0m
[34m2025-01-02 12:55:56,777 - DEBUG - ADD PATIENTS[0m
[34m2025-01-02 12:55:56,777 - DEBUG - ADD PATIENTS[0m
[34m2025-01-02 12:55:56,777 - DEBUG - ADD PATIENTS[0m
[34m2025-01-02 12:55:56,778 - DEBUG - ADD PATIENTS[0m
[34m2025-01-02 12:55:56,778 - DEBUG - ADD PATIENTS[0m
[34m2025-01-02 12:55:56,778 - DEBUG - ADD PATIENTS[0m
[34m2025-01-02 12:55:56,778 - DEBUG - ADD PATIENTS[0m
[34m2025-01-02 12:55:56,778 - DEBUG - ADD PATIENTS[0m
[34m2025-01-02 12:55:56,778 - DEBUG - ADD PATIENTS[0m
[34m2025-01-02 12:55:56,778 - DEBUG - ADD PATIENTS[0m
[34m2025-01-02 12:55:56,778 - DEBUG - ADD PATIENTS[0m
[34m2025-01-02 12:55:56,778 - DEBUG - ADD PATIENTS[0m
[34m2025-01-02 12:55:56,778 - DEBUG - ADD PATIENTS[0m
[34m2025-01-02 12:55:56,779 - DEBUG - ADD PATIENTS[0m
[34m2025-01-02 12:55:56,779 - DEBUG - ADD PATIENTS[0m
[34m2025-01-02 12:55:56,779 - DEBUG - ADD PATIENTS[0m
[34m2025-01-02 12:55:56,779 - DEBUG - ADD PATIENTS[0m
[34m2025-01-02 12:55:56,779 - DEBUG - ADD PATIENTS[0m
[34m2025-01-02 12:55:56,779 - DEBUG - ADD PATIENTS[0m
[34m2025-01-02 12:55:56,779 - DEBUG - ADD PATIENTS[0m
[34m2025-01-02 12:55:56,779 - DEBUG - ADD PATIENTS[0m
[34m2025-01-02 12:55:56,779 - DEBUG - ADD PATIENTS[0m
[34m2025-01-02 12:55:56,780 - DEBUG - ADD PATIENTS[0m
[34m2025-01-02 12:55:56,780 - DEBUG - ADD PATIENTS[0m
[34m2025-01-02 12:55:56,781 - DEBUG - ADD PATIENTS[0m
[34m2025-01-02 12:55:56,781 - DEBUG - ADD PATIENTS[0m
[34m2025-01-02 12:55:56,781 - DEBUG - ADD PATIENTS[0m
[34m2025-01-02 12:55:56,781 - DEBUG - ADD PATIENTS[0m
[34m2025-01-02 12:55:56,781 - DEBUG - ADD PATIENTS[0m
[34m2025-01-02 12:55:56,781 - DEBUG - ADD PATIENTS[0m
[34m2025-01-02 12:55:56,781 - DEBUG - ADD PATIENTS[0m
[34m2025-01-02 12:55:56,781 - DEBUG - ADD PATIENTS[0m
[34m2025-01-02 12:55:56,781 - DEBUG - ADD PATIENTS[0m
[34m2025-01-02 12:55:56,781 - DEBUG - ADD PATIENTS[0m
[34m2025-01-02 12:55:56,782 - DEBUG - ADD PATIENTS[0m
[34m2025-01-02 12:55:56,782 - DEBUG - ADD PATIENTS[0m
[34m2025-01-02 12:55:56,782 - DEBUG - ADD PATIENTS[0m
[34m2025-01-02 12:55:56,782 - DEBUG - Instance data:[0m
[34m2025-01-02 12:55:56,782 - DEBUG - Number of patients: 40[0m
[34m2025-01-02 12:55:56,782 - DEBUG - Number of beds: 40[0m
[34m2025-01-02 12:55:56,782 - DEBUG - Average number of treatments per patient: 21.725[0m
[34m2025-01-02 12:55:56,782 - DEBUG - Average number of treatment per stayed day: 1.5714285714285714[0m
[34m2025-01-02 12:55:56,782 - DEBUG - Number of treatments: 869[0m
[34m2025-01-02 12:55:56,782 - DEBUG - Number of resources: 9[0m
[34m2025-01-02 12:55:56,782 - DEBUG - Number of resource groups: 4[0m
[34m2025-01-02 12:55:56,782 - DEBUG - Number of resource hours needed per all treatment by RG(therapists): 38.3375[0m
[34m2025-01-02 12:55:56,782 - DEBUG - Number of resource hours needed per all treatment by RG(rooms): 74.50000000000004[0m
[34m2025-01-02 12:55:56,782 - DEBUG - Number of resource hours needed per all treatment by RG(physiotherapist): 26.0[0m
[34m2025-01-02 12:55:56,782 - DEBUG - Number of resource hours needed per all treatment by RG(sport_room): 18.9375[0m
[32m2025-01-02 12:55:56,783 - INFO - {'solver': 'MIPSolver', 'args': {'use_lazy_constraints': True, 'enforce_min_treatments_per_day': True, 'enforce_max_treatments_per_e_w': True, 'enforce_min_patients_per_treatment': True, 'log_to_console': True}}[0m
[34m2025-01-02 12:55:56,783 - DEBUG - Setting options: MIPSolver[0m
[34m2025-01-02 12:55:56,783 - DEBUG -  ---- use_lazy_constraints to True[0m
[34m2025-01-02 12:55:56,783 - DEBUG - Setting options: Solver[0m
[34m2025-01-02 12:55:56,783 - DEBUG -  ---- number_of_threads to 4 (default)[0m
[34m2025-01-02 12:55:56,783 - DEBUG -  ---- treatment_value to 0 (default)[0m
[34m2025-01-02 12:55:56,783 - DEBUG -  ---- delay_value to 1 (default)[0m
[34m2025-01-02 12:55:56,783 - DEBUG -  ---- missing_treatment_value to 4 (default)[0m
[34m2025-01-02 12:55:56,783 - DEBUG -  ---- enforce_min_treatments_per_day to True[0m
[34m2025-01-02 12:55:56,783 - DEBUG -  ---- enforce_max_treatments_per_e_w to True[0m
[34m2025-01-02 12:55:56,783 - DEBUG -  ---- enforce_min_patients_per_treatment to True[0m
[34m2025-01-02 12:55:56,783 - DEBUG -  ---- log_to_console to True[0m
[34m2025-01-02 12:55:56,783 - DEBUG -  ---- log_to_file to True (default)[0m
[34m2025-01-02 12:55:56,783 - DEBUG -  ---- no_rel_heur_time to 1 (default)[0m
[32m2025-01-02 12:55:56,799 - INFO - Create model: MIPSolver[0m
Set parameter TSPort to value 50039
Set parameter TokenServer to value "license.itc.rwth-aachen.de"
Set parameter Threads to value 4
Set parameter Cuts to value 0
Set parameter NoRelHeurTime to value 1
Set parameter LazyConstraints to value 1
[34m2025-01-02 12:55:59,054 - DEBUG - Variables created.[0m
[34m2025-01-02 12:56:02,261 - DEBUG - Constraint (p1) created.[0m
[34m2025-01-02 12:56:02,840 - DEBUG - Constraint (when_admitted) created.[0m
[34m2025-01-02 12:56:03,117 - DEBUG - Constraint (p3) created.[0m
[34m2025-01-02 12:56:03,121 - DEBUG - Constraint (p4) created.[0m
[34m2025-01-02 12:56:03,121 - DEBUG - Constraint (p7) created.[0m
[34m2025-01-02 12:56:03,193 - DEBUG - Constraint (r3) created.[0m
[34m2025-01-02 12:56:04,333 - DEBUG - Constraint (r4) created.[0m
[34m2025-01-02 12:56:05,109 - DEBUG - Constraint (a1) created.[0m
[34m2025-01-02 12:56:05,224 - DEBUG - Constraint (a4) created.[0m
[34m2025-01-02 12:56:05,252 - DEBUG - Constraint (a5) created.[0m
[34m2025-01-02 12:56:05,282 - DEBUG - Constraint (a5) created.[0m
[34m2025-01-02 12:56:05,282 - DEBUG - Constraint (already_admitted) created.[0m
[32m2025-01-02 12:56:06,830 - INFO - Time to create model: 10.031[0m
[32m2025-01-02 12:56:06,830 - INFO - Solving model: MIPSolver[0m
Gurobi Optimizer version 10.0.0 build v10.0.0rc2 (linux64)

CPU model: Intel(R) Xeon(R) Platinum 8468, instruction set [SSE2|AVX|AVX2|AVX512]
Thread count: 96 physical cores, 96 logical processors, using up to 4 threads

Optimize a model with 504545 rows, 383716 columns and 2479216 nonzeros
Model fingerprint: 0x19b30310
Variable types: 2 continuous, 383714 integer (383714 binary)
Coefficient statistics:
  Matrix range     [1e+00, 1e+01]
  Objective range  [1e+00, 1e+01]
  Bounds range     [1e+00, 1e+00]
  RHS range        [1e+00, 3e+03]
Presolve removed 183737 rows and 124483 columns (presolve time = 5s) ...
Presolve removed 183737 rows and 124483 columns (presolve time = 10s) ...
Presolve removed 183737 rows and 124483 columns (presolve time = 15s) ...
Presolve removed 183737 rows and 128419 columns (presolve time = 20s) ...
Presolve removed 187997 rows and 128575 columns (presolve time = 25s) ...
Presolve removed 187997 rows and 128575 columns (presolve time = 30s) ...
Presolve removed 187868 rows and 128446 columns
Presolve time: 30.68s
Presolved: 316677 rows, 255270 columns, 1558523 nonzeros
Variable types: 0 continuous, 255270 integer (255140 binary)
Starting NoRel heuristic
Found phase-1 solution: relaxation 43
Root relaxation presolved: 316466 rows, 255481 columns, 1539378 nonzeros

Deterministic concurrent LP optimizer: primal simplex, dual simplex, and barrier
Showing barrier log only...

Root barrier log...

Elapsed ordering time = 5s
Elapsed ordering time = 10s
Ordering time: 10.05s

Barrier statistics:
 Dense cols : 164
 AA' NZ     : 2.047e+06
 Factor NZ  : 2.424e+07 (roughly 300 MB of memory)
 Factor Ops : 1.078e+10 (less than 1 second per iteration)
 Threads    : 2

                  Objective                Residual
Iter       Primal          Dual         Primal    Dual     Compl     Time
   0  -4.37877401e+06 -1.79654500e+05  8.83e+04 4.74e-01  1.19e+02    49s
   1  -3.61075981e+06 -2.01107154e+05  7.28e+04 1.79e+00  9.42e+01    51s
   2  -2.41984693e+06 -2.24780141e+05  4.90e+04 1.38e+00  6.39e+01    53s
   3  -1.35186083e+06 -2.45871711e+05  2.77e+04 1.10e+00  3.65e+01    55s
   4  -8.48202531e+05 -2.46831081e+05  1.74e+04 9.90e-02  2.31e+01    57s
   5  -1.53976354e+05 -1.99765815e+05  3.18e+03 2.89e-02  4.63e+00    59s
   6  -6.72589930e+04 -1.23826170e+05  1.40e+03 1.06e-02  2.01e+00    62s
   7  -2.79071018e+04 -6.78221813e+04  5.91e+02 2.86e-03  8.40e-01    64s
   8  -1.69266395e+04 -4.25889627e+04  3.60e+02 1.32e-03  4.84e-01    67s
   9  -9.62387877e+03 -3.34571098e+04  2.07e+02 9.08e-04  3.02e-01    69s
  10  -5.93924665e+03 -2.43147747e+04  1.32e+02 5.49e-04  1.95e-01    71s
  11  -3.73242826e+03 -1.91942859e+04  8.68e+01 4.07e-04  1.37e-01    72s
  12  -1.94206600e+03 -1.21495681e+04  5.05e+01 2.85e-04  7.86e-02    74s
  13  -5.69723071e+02 -6.59385802e+03  2.27e+01 1.51e-04  3.75e-02    76s
  14   3.25498173e+02 -2.36625103e+03  4.53e+00 5.77e-05  1.25e-02    78s
  15   5.36103343e+02  2.31014038e+02  1.86e-01 1.22e-05  1.24e-03    80s
  16   5.44016584e+02  5.38791643e+02  9.80e-13 1.24e-06  2.04e-05    82s
  17   5.44000017e+02  5.43994792e+02  2.00e-12 9.50e-09  2.04e-08    83s
  18   5.44000000e+02  5.43999995e+02  2.70e-13 8.30e-12  2.04e-11    85s

Barrier solved model in 18 iterations and 85.31 seconds (29.31 work units)
Optimal objective 5.44000000e+02


Root crossover log...

    2409 DPushes remaining with DInf 0.0000000e+00                86s
       0 DPushes remaining with DInf 0.0000000e+00                86s

   52397 PPushes remaining with PInf 0.0000000e+00                86s
    8003 PPushes remaining with PInf 0.0000000e+00                90s
    4717 PPushes remaining with PInf 0.0000000e+00                95s
    2854 PPushes remaining with PInf 0.0000000e+00               100s
     969 PPushes remaining with PInf 0.0000000e+00               106s
     184 PPushes remaining with PInf 0.0000000e+00               110s
       0 PPushes remaining with PInf 0.0000000e+00               112s

  Push phase complete: Pinf 0.0000000e+00, Dinf 3.7124361e-10    112s


Root simplex log...

Iteration    Objective       Primal Inf.    Dual Inf.      Time
   54796    5.4400000e+02   0.000000e+00   0.000000e+00    112s
Concurrent spin time: 0.00s

Solved with barrier
   54796    5.4400000e+02   0.000000e+00   0.000000e+00    112s

Use crossover to convert LP symmetric solution to basic solution...

Root crossover log...

   15445 DPushes remaining with DInf 0.0000000e+00               113s

   27464 PPushes remaining with PInf 0.0000000e+00               113s
    4527 PPushes remaining with PInf 0.0000000e+00               116s
    2972 PPushes remaining with PInf 0.0000000e+00               120s
    1412 PPushes remaining with PInf 0.0000000e+00               126s
     449 PPushes remaining with PInf 0.0000000e+00               131s
       0 PPushes remaining with PInf 0.0000000e+00               134s

  Push phase complete: Pinf 0.0000000e+00, Dinf 5.0340252e-10    134s


Root simplex log...

Iteration    Objective       Primal Inf.    Dual Inf.      Time
   82263    5.4400000e+02   0.000000e+00   0.000000e+00    135s
   82263    5.4400000e+02   0.000000e+00   0.000000e+00    135s

Root relaxation: objective 5.440000e+02, 82263 iterations, 101.70 seconds (39.73 work units)
Total elapsed time = 309.04s

    Nodes    |    Current Node    |     Objective Bounds      |     Work
 Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time

     0     0  544.00000    0 2318          -  544.00000      -     -  463s
     0     0  544.00000    0 2318          -  544.00000      -     -  468s
     0     0  544.00000    0  487          -  544.00000      -     -  611s
     0     2  544.00000    0  367          -  544.00000      -     -  957s
     1     4  544.00000    1 1312          -  544.00000      - 221526  974s
     3     8  544.00000    2 1292          -  544.00000      - 80013  988s
     7    12  544.00000    3 1278          -  544.00000      - 38451  991s
    11    16  544.00000    4 1148          -  544.00000      - 24846  995s
    23    28  544.00000    6  999          -  544.00000      - 12248 1003s
    27    39  544.00000    7  993          -  544.00000      - 11069 1048s
    38    66  544.00000   10  314          -  544.00000      - 22313 1255s
    65   138  544.00000   11  288          -  544.00000      - 17879 1530s
   139   350  544.00000   21  905          -  544.00000      - 11033 1583s
   359   570  544.00000   62  407          -  544.00000      -  4674 1610s
   579   718  544.00000  102  183          -  544.00000      -  2937 1631s
   799   858  544.00000  138  182          -  544.00000      -  2145 1666s
   985  1039  544.00000  138  378          -  544.00000      -  1860 1696s
  1206  1080  544.00000   59  487          -  544.00000      -  1557 1958s
  1207  1081  544.00000   24  487          -  544.00000      -  1556 1960s
  1208  1081  544.00000   23 34628          -  544.00000      -  1554 2895s
  1209  1082  544.00000   63 34628          -  544.00000      -  1553 3419s
