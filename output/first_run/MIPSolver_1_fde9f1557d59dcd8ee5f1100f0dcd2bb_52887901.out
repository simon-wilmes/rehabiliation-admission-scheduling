1.NAME: MIPSolver
2.PARAMS: {'use_lazy_constraints': False}
3.INSTANCE: /home/wx350715/Kobra/rehabiliation-admission-scheduling/data/comp_study_002/instance_6_15.txt
4.REPETITION: 1
Current directory: /home/wx350715/Kobra/rehabiliation-admission-scheduling
[34m2025-01-01 14:45:23,001 - DEBUG - Solver: <class 'src.solvers.mip.MIPSolver'>[0m
[34m2025-01-01 14:45:23,001 - DEBUG - Args: {'use_lazy_constraints': False}[0m
[34m2025-01-01 14:45:23,001 - DEBUG - File path /home/wx350715/Kobra/rehabiliation-admission-scheduling/data/comp_study_002/instance_6_15.txt[0m
[34m2025-01-01 14:45:23,002 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-01 14:45:23,002 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-01 14:45:23,002 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-01 14:45:23,003 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-01 14:45:23,003 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-01 14:45:23,003 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-01 14:45:23,003 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-01 14:45:23,003 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-01 14:45:23,003 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-01 14:45:23,003 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-01 14:45:23,003 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-01 14:45:23,003 - DEBUG - ADD RESOURCE_GROUPS[0m
[34m2025-01-01 14:45:23,003 - DEBUG - ADD RESOURCE_GROUPS[0m
[34m2025-01-01 14:45:23,003 - DEBUG - ADD RESOURCE_GROUPS[0m
[34m2025-01-01 14:45:23,003 - DEBUG - ADD RESOURCE_GROUPS[0m
[34m2025-01-01 14:45:23,003 - DEBUG - ADD RESOURCES[0m
[34m2025-01-01 14:45:23,003 - DEBUG - ADD RESOURCES[0m
[34m2025-01-01 14:45:23,003 - DEBUG - ADD RESOURCES[0m
[34m2025-01-01 14:45:23,004 - DEBUG - ADD RESOURCES[0m
[34m2025-01-01 14:45:23,004 - DEBUG - ADD RESOURCES[0m
[34m2025-01-01 14:45:23,004 - DEBUG - ADD RESOURCES[0m
[34m2025-01-01 14:45:23,004 - DEBUG - ADD RESOURCES[0m
[34m2025-01-01 14:45:23,004 - DEBUG - ADD RESOURCES[0m
[34m2025-01-01 14:45:23,004 - DEBUG - ADD RESOURCES[0m
[34m2025-01-01 14:45:23,004 - DEBUG - ADD RESOURCES[0m
[34m2025-01-01 14:45:23,004 - DEBUG - ADD TREATMENTS[0m
[34m2025-01-01 14:45:23,004 - DEBUG - ADD TREATMENTS[0m
[34m2025-01-01 14:45:23,004 - DEBUG - ADD TREATMENTS[0m
[34m2025-01-01 14:45:23,004 - DEBUG - ADD TREATMENTS[0m
[34m2025-01-01 14:45:23,004 - DEBUG - ADD TREATMENTS[0m
[34m2025-01-01 14:45:23,005 - DEBUG - ADD TREATMENTS[0m
[34m2025-01-01 14:45:23,005 - DEBUG - ADD TREATMENTS[0m
[34m2025-01-01 14:45:23,005 - DEBUG - ADD TREATMENTS[0m
[34m2025-01-01 14:45:23,005 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:23,005 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:23,005 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:23,005 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:23,005 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:23,005 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:23,006 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:23,006 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:23,006 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:23,006 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:23,006 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:23,006 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:23,006 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:23,006 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:23,006 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:23,006 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:23,007 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:23,007 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:23,007 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:23,007 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:23,007 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:23,007 - DEBUG - Instance data:[0m
[34m2025-01-01 14:45:23,007 - DEBUG - Number of patients: 21[0m
[34m2025-01-01 14:45:23,007 - DEBUG - Number of beds: 36[0m
[34m2025-01-01 14:45:23,007 - DEBUG - Average number of treatments per patient: 32.38095238095238[0m
[34m2025-01-01 14:45:23,008 - DEBUG - Average number of treatment per stayed day: 2.3859649122807016[0m
[34m2025-01-01 14:45:23,008 - DEBUG - Number of treatments: 680[0m
[34m2025-01-01 14:45:23,008 - DEBUG - Number of resources: 10[0m
[34m2025-01-01 14:45:23,009 - DEBUG - Number of resource groups: 4[0m
[34m2025-01-01 14:45:23,009 - DEBUG - Number of resource hours needed per all treatment by RG(therapists): 19.704166666666676[0m
[34m2025-01-01 14:45:23,009 - DEBUG - Number of resource hours needed per all treatment by RG(rooms): 35.95416666666666[0m
[34m2025-01-01 14:45:23,009 - DEBUG - Number of resource hours needed per all treatment by RG(physiotherapist): 15.5[0m
[34m2025-01-01 14:45:23,009 - DEBUG - Number of resource hours needed per all treatment by RG(sport_room): 6.75[0m
[32m2025-01-01 14:45:23,009 - INFO - {'solver': 'MIPSolver', 'args': {'use_lazy_constraints': True, 'enforce_min_treatments_per_day': True, 'enforce_max_treatments_per_e_w': True, 'enforce_min_patients_per_treatment': True, 'log_to_console': True}}[0m
[34m2025-01-01 14:45:23,009 - DEBUG - Setting options: MIPSolver[0m
[34m2025-01-01 14:45:23,009 - DEBUG -  ---- use_lazy_constraints to True[0m
[34m2025-01-01 14:45:23,009 - DEBUG - Setting options: Solver[0m
[34m2025-01-01 14:45:23,009 - DEBUG -  ---- number_of_threads to 4 (default)[0m
[34m2025-01-01 14:45:23,009 - DEBUG -  ---- treatment_value to 0 (default)[0m
[34m2025-01-01 14:45:23,009 - DEBUG -  ---- delay_value to 1 (default)[0m
[34m2025-01-01 14:45:23,009 - DEBUG -  ---- missing_treatment_value to 4 (default)[0m
[34m2025-01-01 14:45:23,009 - DEBUG -  ---- enforce_min_treatments_per_day to True[0m
[34m2025-01-01 14:45:23,009 - DEBUG -  ---- enforce_max_treatments_per_e_w to True[0m
[34m2025-01-01 14:45:23,009 - DEBUG -  ---- enforce_min_patients_per_treatment to True[0m
[34m2025-01-01 14:45:23,009 - DEBUG -  ---- log_to_console to True[0m
[34m2025-01-01 14:45:23,009 - DEBUG -  ---- log_to_file to True (default)[0m
[34m2025-01-01 14:45:23,009 - DEBUG -  ---- no_rel_heur_time to 1 (default)[0m
[32m2025-01-01 14:45:23,043 - INFO - Create model: MIPSolver[0m
Set parameter TSPort to value 50039
Set parameter TokenServer to value "license.itc.rwth-aachen.de"
Set parameter Threads to value 4
Set parameter Cuts to value 0
Set parameter NoRelHeurTime to value 1
Set parameter LazyConstraints to value 1
[34m2025-01-01 14:45:25,673 - DEBUG - Variables created.[0m
[34m2025-01-01 14:45:29,030 - DEBUG - Constraint (p1) created.[0m
[34m2025-01-01 14:45:29,513 - DEBUG - Constraint (when_admitted) created.[0m
[34m2025-01-01 14:45:29,855 - DEBUG - Constraint (p3) created.[0m
[34m2025-01-01 14:45:29,857 - DEBUG - Constraint (p4) created.[0m
[34m2025-01-01 14:45:29,857 - DEBUG - Constraint (p7) created.[0m
[34m2025-01-01 14:45:30,095 - DEBUG - Constraint (r3) created.[0m
[34m2025-01-01 14:45:31,167 - DEBUG - Constraint (r4) created.[0m
[34m2025-01-01 14:45:32,633 - DEBUG - Constraint (a1) created.[0m
[34m2025-01-01 14:45:32,732 - DEBUG - Constraint (a4) created.[0m
[34m2025-01-01 14:45:32,755 - DEBUG - Constraint (a5) created.[0m
[34m2025-01-01 14:45:32,778 - DEBUG - Constraint (a5) created.[0m
[34m2025-01-01 14:45:32,778 - DEBUG - Constraint (already_admitted) created.[0m
[32m2025-01-01 14:45:33,574 - INFO - Time to create model: 10.531[0m
[32m2025-01-01 14:45:33,574 - INFO - Solving model: MIPSolver[0m
Gurobi Optimizer version 10.0.0 build v10.0.0rc2 (linux64)

CPU model: Intel(R) Xeon(R) Platinum 8468, instruction set [SSE2|AVX|AVX2|AVX512]
Thread count: 96 physical cores, 96 logical processors, using up to 4 threads

Optimize a model with 549384 rows, 424127 columns and 2628615 nonzeros
Model fingerprint: 0x5c6e8ae4
Variable types: 2 continuous, 424125 integer (424125 binary)
Coefficient statistics:
  Matrix range     [1e+00, 1e+01]
  Objective range  [1e+00, 1e+01]
  Bounds range     [1e+00, 1e+00]
  RHS range        [1e+00, 3e+03]
Presolve removed 246842 rows and 166602 columns (presolve time = 5s) ...
Presolve removed 246842 rows and 166602 columns (presolve time = 10s) ...
Presolve removed 246842 rows and 166602 columns (presolve time = 15s) ...
Presolve removed 246842 rows and 166602 columns (presolve time = 20s) ...
Presolve removed 246842 rows and 168928 columns (presolve time = 25s) ...
Presolve removed 251552 rows and 168928 columns (presolve time = 30s) ...
Presolve removed 251506 rows and 168882 columns
Presolve time: 33.44s
Presolved: 297878 rows, 255245 columns, 1430298 nonzeros
Variable types: 0 continuous, 255245 integer (255198 binary)
Starting NoRel heuristic
Found phase-1 solution: relaxation 69
Found phase-1 solution: relaxation 63
Root relaxation presolved: 297755 rows, 255368 columns, 1409979 nonzeros

Deterministic concurrent LP optimizer: primal simplex, dual simplex, and barrier
Showing barrier log only...

Root barrier log...

Ordering time: 2.13s

Barrier statistics:
 Dense cols : 39
 AA' NZ     : 3.488e+06
 Factor NZ  : 2.399e+07 (roughly 400 MB of memory)
 Factor Ops : 5.030e+09 (less than 1 second per iteration)
 Threads    : 2

                  Objective                Residual
Iter       Primal          Dual         Primal    Dual     Compl     Time
   0  -4.83293997e+06 -1.12451011e+06  1.22e+05 1.49e+00  2.95e+02    44s
   1  -3.89249846e+06 -1.18185659e+06  9.80e+04 4.50e+00  2.40e+02    45s
   2  -2.69990622e+06 -1.20376218e+06  6.82e+04 4.28e+00  1.69e+02    48s
   3  -2.01273416e+06 -1.25047285e+06  5.09e+04 2.86e+00  1.26e+02    50s
   4  -1.18906515e+06 -1.29448202e+06  3.02e+04 7.30e-01  7.56e+01    53s
   5  -1.96337366e+05 -1.17376697e+06  5.03e+03 2.55e-02  1.42e+01    55s
   6  -1.08431022e+05 -8.14329198e+05  2.79e+03 5.77e-03  7.56e+00    57s
   7  -6.96558390e+04 -6.44732173e+05  1.80e+03 3.25e-03  4.88e+00    59s
   8  -5.65082579e+04 -4.48545948e+05  1.47e+03 2.80e-03  3.69e+00    61s
   9  -3.52977477e+04 -2.95975893e+05  9.27e+02 8.15e-04  2.25e+00    63s
  10  -1.72178826e+04 -1.56202348e+05  4.60e+02 2.79e-04  1.08e+00    65s
  11  -6.11964974e+03 -8.21204550e+04  1.74e+02 1.71e-04  4.20e-01    68s
  12  -3.20428263e+03 -6.32818987e+04  9.89e+01 1.10e-04  2.58e-01    71s
  13  -2.18064017e+03 -5.00009121e+04  7.26e+01 6.90e-05  1.88e-01    73s
  14  -1.32982946e+03 -4.05350054e+04  5.09e+01 5.44e-05  1.37e-01    74s
  15   4.83146135e+01 -3.10823541e+04  1.60e+01 4.02e-05  7.29e-02    76s
  16   5.63945654e+02 -1.39381527e+04  2.91e+00 1.51e-05  2.72e-02    78s
  17   6.46864160e+02 -6.09252192e+03  7.28e-01 9.95e-06  1.19e-02    80s
  18   6.63537906e+02 -2.16316381e+03  2.45e-01 4.30e-06  4.90e-03    82s
  19   6.65836517e+02 -1.77131984e+03  2.16e-01 3.84e-06  4.22e-03    84s
  20   6.68295287e+02 -4.19066885e+02  7.65e-02 4.37e-05  1.87e-03    86s
  21   6.68721327e+02  3.95341176e+02  3.35e-02 1.47e-05  4.71e-04    88s
  22   6.68525878e+02  5.98768495e+02  2.20e-02 1.11e-05  1.21e-04    90s
  23   6.68390213e+02  6.14726418e+02  1.29e-02 8.58e-06  9.29e-05    92s
  24   6.68293885e+02  6.39596975e+02  7.57e-03 3.64e-06  4.97e-05    95s
  25   6.68327114e+02  6.46791249e+02  1.84e-03 3.18e-06  3.70e-05    96s
  26   6.68322646e+02  6.50873617e+02  1.69e-03 2.56e-06  3.00e-05    99s
  27   6.68328268e+02  6.55022105e+02  2.45e-04 2.01e-06  2.28e-05   100s
  28   6.68310825e+02  6.60842398e+02  1.16e-04 1.10e-06  1.28e-05   102s
  29   6.68295913e+02  6.62203680e+02  7.54e-05 8.99e-07  1.04e-05   104s
  30   6.68287649e+02  6.66566644e+02  1.86e-05 2.17e-07  2.95e-06   107s
  31   6.68278109e+02  6.68233342e+02  4.99e-07 3.81e-09  7.67e-08   109s
  32   6.68277778e+02  6.68277733e+02  1.89e-12 3.42e-11  7.67e-11   111s
  33   6.68277778e+02  6.68277778e+02  2.94e-12 7.39e-13  7.67e-14   113s

Barrier solved model in 33 iterations and 113.36 seconds (30.21 work units)
Optimal objective 6.68277778e+02


Root crossover log...

    2488 DPushes remaining with DInf 0.0000000e+00               114s
       0 DPushes remaining with DInf 0.0000000e+00               115s

  149510 PPushes remaining with PInf 0.0000000e+00               115s
   99744 PPushes remaining with PInf 0.0000000e+00               115s
   34515 PPushes remaining with PInf 0.0000000e+00               121s
   21042 PPushes remaining with PInf 0.0000000e+00               125s
   14460 PPushes remaining with PInf 0.0000000e+00               130s
   11968 PPushes remaining with PInf 0.0000000e+00               136s
   10555 PPushes remaining with PInf 0.0000000e+00               141s
    9667 PPushes remaining with PInf 0.0000000e+00               145s
    8474 PPushes remaining with PInf 0.0000000e+00               152s
    7636 PPushes remaining with PInf 0.0000000e+00               156s
    6834 PPushes remaining with PInf 0.0000000e+00               161s
    6289 PPushes remaining with PInf 0.0000000e+00               165s
    5491 PPushes remaining with PInf 0.0000000e+00               171s
    4955 PPushes remaining with PInf 0.0000000e+00               176s
    4411 PPushes remaining with PInf 0.0000000e+00               180s
    3593 PPushes remaining with PInf 0.0000000e+00               187s
    3051 PPushes remaining with PInf 0.0000000e+00               192s
    2487 PPushes remaining with PInf 0.0000000e+00               197s
    1923 PPushes remaining with PInf 0.0000000e+00               203s
    1651 PPushes remaining with PInf 0.0000000e+00               206s
    1093 PPushes remaining with PInf 0.0000000e+00               213s
     826 PPushes remaining with PInf 0.0000000e+00               216s
     551 PPushes remaining with PInf 0.0000000e+00               220s
       0 PPushes remaining with PInf 0.0000000e+00               228s

  Push phase complete: Pinf 0.0000000e+00, Dinf 1.0935358e-09    228s


Root simplex log...

Iteration    Objective       Primal Inf.    Dual Inf.      Time
  151740    6.6827778e+02   0.000000e+00   0.000000e+00    229s
Concurrent spin time: 0.02s

Solved with barrier
  151740    6.6827778e+02   0.000000e+00   0.000000e+00    230s

Use crossover to convert LP symmetric solution to basic solution...

Root crossover log...

    5403 DPushes remaining with DInf 0.0000000e+00               230s

   22377 PPushes remaining with PInf 0.0000000e+00               230s
    1028 PPushes remaining with PInf 0.0000000e+00               235s
       0 PPushes remaining with PInf 0.0000000e+00               239s

  Push phase complete: Pinf 0.0000000e+00, Dinf 4.6836156e-10    239s


Root simplex log...

Iteration    Objective       Primal Inf.    Dual Inf.      Time
  174120    6.6827778e+02   0.000000e+00   0.000000e+00    240s
  174120    6.6827778e+02   0.000000e+00   0.000000e+00    240s

Root relaxation: objective 6.682778e+02, 174120 iterations, 204.53 seconds (49.63 work units)

    Nodes    |    Current Node    |     Objective Bounds      |     Work
 Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time

     0     0  668.27778    0 19578          -  668.27778      -     -  512s
     0     0  668.27778    0 19578          -  668.27778      -     -  822s
     0     2  668.27778    0 19578          -  668.27778      -     - 1661s
     1     4  668.27778    1 9613          -  668.27778      - 193716 2252s
     3     8  668.27778    2 6455          -  668.27778      - 89034 3397s
