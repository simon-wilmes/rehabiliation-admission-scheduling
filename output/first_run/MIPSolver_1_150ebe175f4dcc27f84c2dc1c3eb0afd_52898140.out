1.NAME: MIPSolver
2.PARAMS: {'use_lazy_constraints': False}
3.INSTANCE: /home/wx350715/Kobra/rehabiliation-admission-scheduling/data/comp_study_002/instance_3_30.txt
4.REPETITION: 1
Current directory: /home/wx350715/Kobra/rehabiliation-admission-scheduling
[34m2025-01-01 18:43:04,467 - DEBUG - Solver: <class 'src.solvers.mip.MIPSolver'>[0m
[34m2025-01-01 18:43:04,467 - DEBUG - Args: {'use_lazy_constraints': False}[0m
[34m2025-01-01 18:43:04,467 - DEBUG - File path /home/wx350715/Kobra/rehabiliation-admission-scheduling/data/comp_study_002/instance_3_30.txt[0m
[34m2025-01-01 18:43:04,467 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-01 18:43:04,467 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-01 18:43:04,467 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-01 18:43:04,467 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-01 18:43:04,467 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-01 18:43:04,467 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-01 18:43:04,467 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-01 18:43:04,467 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-01 18:43:04,467 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-01 18:43:04,467 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-01 18:43:04,467 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-01 18:43:04,467 - DEBUG - ADD RESOURCE_GROUPS[0m
[34m2025-01-01 18:43:04,467 - DEBUG - ADD RESOURCE_GROUPS[0m
[34m2025-01-01 18:43:04,468 - DEBUG - ADD RESOURCE_GROUPS[0m
[34m2025-01-01 18:43:04,468 - DEBUG - ADD RESOURCE_GROUPS[0m
[34m2025-01-01 18:43:04,468 - DEBUG - ADD RESOURCES[0m
[34m2025-01-01 18:43:04,468 - DEBUG - ADD RESOURCES[0m
[34m2025-01-01 18:43:04,468 - DEBUG - ADD RESOURCES[0m
[34m2025-01-01 18:43:04,468 - DEBUG - ADD RESOURCES[0m
[34m2025-01-01 18:43:04,468 - DEBUG - ADD RESOURCES[0m
[34m2025-01-01 18:43:04,468 - DEBUG - ADD RESOURCES[0m
[34m2025-01-01 18:43:04,468 - DEBUG - ADD RESOURCES[0m
[34m2025-01-01 18:43:04,468 - DEBUG - ADD RESOURCES[0m
[34m2025-01-01 18:43:04,468 - DEBUG - ADD RESOURCES[0m
[34m2025-01-01 18:43:04,468 - DEBUG - ADD TREATMENTS[0m
[34m2025-01-01 18:43:04,468 - DEBUG - ADD TREATMENTS[0m
[34m2025-01-01 18:43:04,469 - DEBUG - ADD TREATMENTS[0m
[34m2025-01-01 18:43:04,469 - DEBUG - ADD TREATMENTS[0m
[34m2025-01-01 18:43:04,469 - DEBUG - ADD TREATMENTS[0m
[34m2025-01-01 18:43:04,469 - DEBUG - ADD TREATMENTS[0m
[34m2025-01-01 18:43:04,469 - DEBUG - ADD TREATMENTS[0m
[34m2025-01-01 18:43:04,469 - DEBUG - ADD TREATMENTS[0m
[34m2025-01-01 18:43:04,469 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:04,469 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:04,469 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:04,469 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:04,469 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:04,470 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:04,470 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:04,470 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:04,470 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:04,470 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:04,470 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:04,470 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:04,470 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:04,470 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:04,470 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:04,470 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:04,471 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:04,471 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:04,471 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:04,471 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:04,471 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:04,471 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:04,471 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:04,471 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:04,471 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:04,471 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:04,471 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:04,472 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:04,473 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:04,473 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:04,473 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:04,473 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:04,473 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:04,473 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:04,473 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:04,473 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:04,473 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:04,473 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:04,473 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:04,474 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:04,474 - DEBUG - Instance data:[0m
[34m2025-01-01 18:43:04,474 - DEBUG - Number of patients: 40[0m
[34m2025-01-01 18:43:04,474 - DEBUG - Number of beds: 40[0m
[34m2025-01-01 18:43:04,474 - DEBUG - Average number of treatments per patient: 29.275[0m
[34m2025-01-01 18:43:04,474 - DEBUG - Average number of treatment per stayed day: 2.11754068716094[0m
[34m2025-01-01 18:43:04,474 - DEBUG - Number of treatments: 1171[0m
[34m2025-01-01 18:43:04,474 - DEBUG - Number of resources: 9[0m
[34m2025-01-01 18:43:04,474 - DEBUG - Number of resource groups: 4[0m
[34m2025-01-01 18:43:04,474 - DEBUG - Number of resource hours needed per all treatment by RG(therapists): 37.824999999999996[0m
[34m2025-01-01 18:43:04,474 - DEBUG - Number of resource hours needed per all treatment by RG(rooms): 73.20000000000003[0m
[34m2025-01-01 18:43:04,474 - DEBUG - Number of resource hours needed per all treatment by RG(physiotherapist): 25.5[0m
[34m2025-01-01 18:43:04,474 - DEBUG - Number of resource hours needed per all treatment by RG(sport_room): 18.375[0m
[32m2025-01-01 18:43:04,474 - INFO - {'solver': 'MIPSolver', 'args': {'use_lazy_constraints': True, 'enforce_min_treatments_per_day': True, 'enforce_max_treatments_per_e_w': True, 'enforce_min_patients_per_treatment': True, 'log_to_console': True}}[0m
[34m2025-01-01 18:43:04,474 - DEBUG - Setting options: MIPSolver[0m
[34m2025-01-01 18:43:04,474 - DEBUG -  ---- use_lazy_constraints to True[0m
[34m2025-01-01 18:43:04,474 - DEBUG - Setting options: Solver[0m
[34m2025-01-01 18:43:04,474 - DEBUG -  ---- number_of_threads to 4 (default)[0m
[34m2025-01-01 18:43:04,474 - DEBUG -  ---- treatment_value to 0 (default)[0m
[34m2025-01-01 18:43:04,474 - DEBUG -  ---- delay_value to 1 (default)[0m
[34m2025-01-01 18:43:04,474 - DEBUG -  ---- missing_treatment_value to 4 (default)[0m
[34m2025-01-01 18:43:04,474 - DEBUG -  ---- enforce_min_treatments_per_day to True[0m
[34m2025-01-01 18:43:04,474 - DEBUG -  ---- enforce_max_treatments_per_e_w to True[0m
[34m2025-01-01 18:43:04,474 - DEBUG -  ---- enforce_min_patients_per_treatment to True[0m
[34m2025-01-01 18:43:04,475 - DEBUG -  ---- log_to_console to True[0m
[34m2025-01-01 18:43:04,475 - DEBUG -  ---- log_to_file to True (default)[0m
[34m2025-01-01 18:43:04,475 - DEBUG -  ---- no_rel_heur_time to 1 (default)[0m
[32m2025-01-01 18:43:04,488 - INFO - Create model: MIPSolver[0m
Set parameter TSPort to value 50039
Set parameter TokenServer to value "license.itc.rwth-aachen.de"
Set parameter Threads to value 4
Set parameter Cuts to value 0
Set parameter NoRelHeurTime to value 1
Set parameter LazyConstraints to value 1
[34m2025-01-01 18:43:06,473 - DEBUG - Variables created.[0m
[34m2025-01-01 18:43:09,216 - DEBUG - Constraint (p1) created.[0m
[34m2025-01-01 18:43:09,677 - DEBUG - Constraint (when_admitted) created.[0m
[34m2025-01-01 18:43:09,901 - DEBUG - Constraint (p3) created.[0m
[34m2025-01-01 18:43:09,904 - DEBUG - Constraint (p4) created.[0m
[34m2025-01-01 18:43:09,904 - DEBUG - Constraint (p7) created.[0m
[34m2025-01-01 18:43:09,963 - DEBUG - Constraint (r3) created.[0m
[34m2025-01-01 18:43:10,913 - DEBUG - Constraint (r4) created.[0m
[34m2025-01-01 18:43:11,602 - DEBUG - Constraint (a1) created.[0m
[34m2025-01-01 18:43:11,694 - DEBUG - Constraint (a4) created.[0m
[34m2025-01-01 18:43:11,718 - DEBUG - Constraint (a5) created.[0m
[34m2025-01-01 18:43:11,742 - DEBUG - Constraint (a5) created.[0m
[34m2025-01-01 18:43:11,742 - DEBUG - Constraint (already_admitted) created.[0m
[32m2025-01-01 18:43:13,018 - INFO - Time to create model: 8.529[0m
[32m2025-01-01 18:43:13,018 - INFO - Solving model: MIPSolver[0m
Gurobi Optimizer version 10.0.0 build v10.0.0rc2 (linux64)

CPU model: Intel(R) Xeon(R) Platinum 8468, instruction set [SSE2|AVX|AVX2|AVX512]
Thread count: 96 physical cores, 96 logical processors, using up to 4 threads

Optimize a model with 493540 rows, 374995 columns and 2421185 nonzeros
Model fingerprint: 0x3c775490
Variable types: 2 continuous, 374993 integer (374993 binary)
Coefficient statistics:
  Matrix range     [1e+00, 1e+01]
  Objective range  [1e+00, 1e+01]
  Bounds range     [1e+00, 1e+00]
  RHS range        [1e+00, 5e+03]
Presolve removed 179580 rows and 122046 columns (presolve time = 5s) ...
Presolve removed 179580 rows and 122046 columns (presolve time = 10s) ...
Presolve removed 179580 rows and 125874 columns (presolve time = 16s) ...
Presolve removed 184404 rows and 126078 columns (presolve time = 20s) ...
Presolve removed 184255 rows and 125929 columns
Presolve time: 24.41s
Presolved: 309285 rows, 249066 columns, 1515861 nonzeros
Variable types: 0 continuous, 249066 integer (248916 binary)
Starting NoRel heuristic
Found phase-1 solution: relaxation 119
Found phase-1 solution: relaxation 118
Found phase-1 solution: relaxation 117
Found phase-1 solution: relaxation 116
Root relaxation presolved: 309058 rows, 249293 columns, 1495966 nonzeros

Deterministic concurrent LP optimizer: primal simplex, dual simplex, and barrier
Showing barrier log only...

Root barrier log...

Elapsed ordering time = 5s
Ordering time: 7.68s

Barrier statistics:
 Dense cols : 164
 AA' NZ     : 1.976e+06
 Factor NZ  : 2.307e+07 (roughly 270 MB of memory)
 Factor Ops : 1.007e+10 (less than 1 second per iteration)
 Threads    : 2

                  Objective                Residual
Iter       Primal          Dual         Primal    Dual     Compl     Time
   0  -4.92753307e+06 -2.85874956e+05  9.47e+04 5.64e-01  2.13e+02    41s
   1  -4.03983448e+06 -3.11573882e+05  7.77e+04 1.96e+00  1.71e+02    43s
   2  -2.78040555e+06 -3.48051209e+05  5.37e+04 3.09e+00  1.19e+02    44s
   3  -1.58976419e+06 -4.23589714e+05  3.08e+04 9.42e-01  6.93e+01    46s
   4  -1.97552221e+05 -4.03892615e+05  3.87e+03 5.31e-02  9.93e+00    48s
   5  -8.49830798e+04 -2.62418207e+05  1.69e+03 7.52e-03  4.26e+00    51s
   6  -4.33336918e+04 -1.56804529e+05  8.78e+02 5.42e-03  2.10e+00    52s
   7  -2.65006012e+04 -1.05183701e+05  5.49e+02 2.31e-03  1.27e+00    54s
   8  -1.84618377e+04 -7.30609966e+04  3.87e+02 1.61e-03  8.41e-01    56s
   9  -1.55192438e+04 -5.98898666e+04  3.27e+02 1.16e-03  6.79e-01    57s
  10  -9.25753772e+03 -3.99922564e+04  1.99e+02 9.42e-04  3.99e-01    58s
  11  -4.82164953e+03 -2.73105975e+04  1.11e+02 6.93e-04  2.30e-01    60s
  12  -6.96083567e+02 -1.54307861e+04  3.12e+01 2.49e-04  9.12e-02    62s
  13   6.75866465e+02 -5.22125011e+03  4.16e+00 7.63e-05  2.63e-02    63s
  14   8.67485010e+02 -1.47652213e+03  2.05e-01 3.55e-05  9.45e-03    65s
  15   8.70432665e+02 -2.71596113e+02  1.13e-01 8.32e-05  4.60e-03    66s
  16   8.72111484e+02  6.01842608e+02  5.64e-02 6.13e-05  1.09e-03    68s
  17   8.74158408e+02  8.44766686e+02  1.05e-12 2.33e-05  1.17e-04    70s
  18   8.74002520e+02  8.73297955e+02  3.86e-14 2.47e-09  2.82e-06    71s
  19   8.74000003e+02  8.73999298e+02  6.54e-13 1.97e-08  2.82e-09    73s
  20   8.74000000e+02  8.73999999e+02  1.91e-11 1.55e-11  2.82e-12    74s

Barrier solved model in 20 iterations and 74.34 seconds (29.94 work units)
Optimal objective 8.74000000e+02


Root crossover log...

    2771 DPushes remaining with DInf 0.0000000e+00                75s
       0 DPushes remaining with DInf 0.0000000e+00                75s

   51490 PPushes remaining with PInf 0.0000000e+00                75s
   30554 PPushes remaining with PInf 0.0000000e+00                75s
    7428 PPushes remaining with PInf 0.0000000e+00                80s
    4588 PPushes remaining with PInf 0.0000000e+00                85s
    2973 PPushes remaining with PInf 0.0000000e+00                90s
    1533 PPushes remaining with PInf 0.0000000e+00                95s
     301 PPushes remaining with PInf 0.0000000e+00               101s
       0 PPushes remaining with PInf 0.0000000e+00               103s

  Push phase complete: Pinf 0.0000000e+00, Dinf 4.9169110e-10    103s


Root simplex log...

Iteration    Objective       Primal Inf.    Dual Inf.      Time
   54192    8.7400000e+02   0.000000e+00   0.000000e+00    103s
Concurrent spin time: 0.01s

Solved with barrier
   54192    8.7400000e+02   0.000000e+00   0.000000e+00    103s

Use crossover to convert LP symmetric solution to basic solution...

Root crossover log...

   15865 DPushes remaining with DInf 0.0000000e+00               104s

   34275 PPushes remaining with PInf 0.0000000e+00               104s
    7817 PPushes remaining with PInf 0.0000000e+00               105s
    4566 PPushes remaining with PInf 0.0000000e+00               110s
    3057 PPushes remaining with PInf 0.0000000e+00               116s
    1849 PPushes remaining with PInf 0.0000000e+00               120s
     625 PPushes remaining with PInf 0.0000000e+00               127s
       0 PPushes remaining with PInf 0.0000000e+00               132s

  Push phase complete: Pinf 0.0000000e+00, Dinf 3.7571664e-10    133s


Root simplex log...

Iteration    Objective       Primal Inf.    Dual Inf.      Time
   88470    8.7400000e+02   0.000000e+00   0.000000e+00    133s
   88470    8.7400000e+02   0.000000e+00   0.000000e+00    133s

Root relaxation: objective 8.740000e+02, 88470 iterations, 103.90 seconds (48.13 work units)
Total elapsed time = 243.81s
Total elapsed time = 313.41s
Total elapsed time = 367.54s
Total elapsed time = 407.93s

    Nodes    |    Current Node    |     Objective Bounds      |     Work
 Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time

     0     0  874.00000    0 24013          -  874.00000      -     -  444s
     0     0  874.00000    0 24013          -  874.00000      -     -  700s
     0     2  874.00000    0 24013          -  874.00000      -     - 1517s
