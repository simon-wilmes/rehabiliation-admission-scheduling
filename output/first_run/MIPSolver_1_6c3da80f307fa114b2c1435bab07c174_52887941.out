1.NAME: MIPSolver
2.PARAMS: {'use_lazy_constraints': True}
3.INSTANCE: /home/wx350715/Kobra/rehabiliation-admission-scheduling/data/comp_study_002/instance_1_less_prescriptions_30.txt
4.REPETITION: 1
Current directory: /home/wx350715/Kobra/rehabiliation-admission-scheduling
[34m2025-01-01 14:45:40,956 - DEBUG - Solver: <class 'src.solvers.mip.MIPSolver'>[0m
[34m2025-01-01 14:45:40,956 - DEBUG - Args: {'use_lazy_constraints': True}[0m
[34m2025-01-01 14:45:40,956 - DEBUG - File path /home/wx350715/Kobra/rehabiliation-admission-scheduling/data/comp_study_002/instance_1_less_prescriptions_30.txt[0m
[34m2025-01-01 14:45:41,020 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-01 14:45:41,020 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-01 14:45:41,020 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-01 14:45:41,020 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-01 14:45:41,021 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-01 14:45:41,021 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-01 14:45:41,021 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-01 14:45:41,021 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-01 14:45:41,021 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-01 14:45:41,021 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-01 14:45:41,021 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-01 14:45:41,021 - DEBUG - ADD RESOURCE_GROUPS[0m
[34m2025-01-01 14:45:41,021 - DEBUG - ADD RESOURCE_GROUPS[0m
[34m2025-01-01 14:45:41,021 - DEBUG - ADD RESOURCE_GROUPS[0m
[34m2025-01-01 14:45:41,021 - DEBUG - ADD RESOURCE_GROUPS[0m
[34m2025-01-01 14:45:41,021 - DEBUG - ADD RESOURCES[0m
[34m2025-01-01 14:45:41,021 - DEBUG - ADD RESOURCES[0m
[34m2025-01-01 14:45:41,021 - DEBUG - ADD RESOURCES[0m
[34m2025-01-01 14:45:41,022 - DEBUG - ADD RESOURCES[0m
[34m2025-01-01 14:45:41,022 - DEBUG - ADD RESOURCES[0m
[34m2025-01-01 14:45:41,022 - DEBUG - ADD RESOURCES[0m
[34m2025-01-01 14:45:41,022 - DEBUG - ADD RESOURCES[0m
[34m2025-01-01 14:45:41,022 - DEBUG - ADD RESOURCES[0m
[34m2025-01-01 14:45:41,022 - DEBUG - ADD RESOURCES[0m
[34m2025-01-01 14:45:41,022 - DEBUG - ADD TREATMENTS[0m
[34m2025-01-01 14:45:41,022 - DEBUG - ADD TREATMENTS[0m
[34m2025-01-01 14:45:41,022 - DEBUG - ADD TREATMENTS[0m
[34m2025-01-01 14:45:41,022 - DEBUG - ADD TREATMENTS[0m
[34m2025-01-01 14:45:41,022 - DEBUG - ADD TREATMENTS[0m
[34m2025-01-01 14:45:41,022 - DEBUG - ADD TREATMENTS[0m
[34m2025-01-01 14:45:41,023 - DEBUG - ADD TREATMENTS[0m
[34m2025-01-01 14:45:41,023 - DEBUG - ADD TREATMENTS[0m
[34m2025-01-01 14:45:41,023 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:41,023 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:41,023 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:41,023 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:41,023 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:41,023 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:41,023 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:41,024 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:41,024 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:41,024 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:41,024 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:41,024 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:41,024 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:41,024 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:41,024 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:41,024 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:41,024 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:41,025 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:41,025 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:41,025 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:41,025 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:41,025 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:41,025 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:41,025 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:41,025 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:41,025 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:41,025 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:41,026 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:41,026 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:41,027 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:41,027 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:41,027 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:41,027 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:41,027 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:41,027 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:41,027 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:41,027 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:41,027 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:41,027 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:41,028 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:41,028 - DEBUG - Instance data:[0m
[34m2025-01-01 14:45:41,028 - DEBUG - Number of patients: 40[0m
[34m2025-01-01 14:45:41,028 - DEBUG - Number of beds: 40[0m
[34m2025-01-01 14:45:41,028 - DEBUG - Average number of treatments per patient: 21.725[0m
[34m2025-01-01 14:45:41,028 - DEBUG - Average number of treatment per stayed day: 1.5714285714285714[0m
[34m2025-01-01 14:45:41,028 - DEBUG - Number of treatments: 869[0m
[34m2025-01-01 14:45:41,028 - DEBUG - Number of resources: 9[0m
[34m2025-01-01 14:45:41,028 - DEBUG - Number of resource groups: 4[0m
[34m2025-01-01 14:45:41,028 - DEBUG - Number of resource hours needed per all treatment by RG(therapists): 38.3375[0m
[34m2025-01-01 14:45:41,028 - DEBUG - Number of resource hours needed per all treatment by RG(rooms): 74.50000000000004[0m
[34m2025-01-01 14:45:41,028 - DEBUG - Number of resource hours needed per all treatment by RG(physiotherapist): 26.0[0m
[34m2025-01-01 14:45:41,028 - DEBUG - Number of resource hours needed per all treatment by RG(sport_room): 18.9375[0m
[32m2025-01-01 14:45:41,028 - INFO - {'solver': 'MIPSolver', 'args': {'use_lazy_constraints': True, 'enforce_min_treatments_per_day': True, 'enforce_max_treatments_per_e_w': True, 'enforce_min_patients_per_treatment': True, 'log_to_console': True}}[0m
[34m2025-01-01 14:45:41,028 - DEBUG - Setting options: MIPSolver[0m
[34m2025-01-01 14:45:41,029 - DEBUG -  ---- use_lazy_constraints to True[0m
[34m2025-01-01 14:45:41,029 - DEBUG - Setting options: Solver[0m
[34m2025-01-01 14:45:41,029 - DEBUG -  ---- number_of_threads to 4 (default)[0m
[34m2025-01-01 14:45:41,029 - DEBUG -  ---- treatment_value to 0 (default)[0m
[34m2025-01-01 14:45:41,029 - DEBUG -  ---- delay_value to 1 (default)[0m
[34m2025-01-01 14:45:41,029 - DEBUG -  ---- missing_treatment_value to 4 (default)[0m
[34m2025-01-01 14:45:41,029 - DEBUG -  ---- enforce_min_treatments_per_day to True[0m
[34m2025-01-01 14:45:41,029 - DEBUG -  ---- enforce_max_treatments_per_e_w to True[0m
[34m2025-01-01 14:45:41,029 - DEBUG -  ---- enforce_min_patients_per_treatment to True[0m
[34m2025-01-01 14:45:41,029 - DEBUG -  ---- log_to_console to True[0m
[34m2025-01-01 14:45:41,029 - DEBUG -  ---- log_to_file to True (default)[0m
[34m2025-01-01 14:45:41,029 - DEBUG -  ---- no_rel_heur_time to 1 (default)[0m
[32m2025-01-01 14:45:41,045 - INFO - Create model: MIPSolver[0m
Set parameter TSPort to value 50039
Set parameter TokenServer to value "license.itc.rwth-aachen.de"
Set parameter Threads to value 4
Set parameter Cuts to value 0
Set parameter NoRelHeurTime to value 1
Set parameter LazyConstraints to value 1
[34m2025-01-01 14:45:42,993 - DEBUG - Variables created.[0m
[34m2025-01-01 14:45:45,675 - DEBUG - Constraint (p1) created.[0m
[34m2025-01-01 14:45:46,140 - DEBUG - Constraint (when_admitted) created.[0m
[34m2025-01-01 14:45:46,358 - DEBUG - Constraint (p3) created.[0m
[34m2025-01-01 14:45:46,360 - DEBUG - Constraint (p4) created.[0m
[34m2025-01-01 14:45:46,361 - DEBUG - Constraint (p7) created.[0m
[34m2025-01-01 14:45:46,417 - DEBUG - Constraint (r3) created.[0m
[34m2025-01-01 14:45:47,386 - DEBUG - Constraint (r4) created.[0m
[34m2025-01-01 14:45:48,069 - DEBUG - Constraint (a1) created.[0m
[34m2025-01-01 14:45:48,167 - DEBUG - Constraint (a4) created.[0m
[34m2025-01-01 14:45:48,191 - DEBUG - Constraint (a5) created.[0m
[34m2025-01-01 14:45:48,215 - DEBUG - Constraint (a5) created.[0m
[34m2025-01-01 14:45:48,215 - DEBUG - Constraint (already_admitted) created.[0m
[32m2025-01-01 14:45:49,672 - INFO - Time to create model: 8.628[0m
[32m2025-01-01 14:45:49,673 - INFO - Solving model: MIPSolver[0m
Gurobi Optimizer version 10.0.0 build v10.0.0rc2 (linux64)

CPU model: Intel(R) Xeon(R) Platinum 8468, instruction set [SSE2|AVX|AVX2|AVX512]
Thread count: 96 physical cores, 96 logical processors, using up to 4 threads

Optimize a model with 504545 rows, 383716 columns and 2479216 nonzeros
Model fingerprint: 0x19b30310
Variable types: 2 continuous, 383714 integer (383714 binary)
Coefficient statistics:
  Matrix range     [1e+00, 1e+01]
  Objective range  [1e+00, 1e+01]
  Bounds range     [1e+00, 1e+00]
  RHS range        [1e+00, 3e+03]
Presolve removed 183737 rows and 124483 columns (presolve time = 5s) ...
Presolve removed 183737 rows and 124483 columns (presolve time = 10s) ...
Presolve removed 183737 rows and 124483 columns (presolve time = 16s) ...
Presolve removed 183737 rows and 128419 columns (presolve time = 20s) ...
Presolve removed 187997 rows and 128575 columns (presolve time = 25s) ...
Presolve removed 187868 rows and 128446 columns
Presolve time: 26.27s
Presolved: 316677 rows, 255270 columns, 1558523 nonzeros
Variable types: 0 continuous, 255270 integer (255140 binary)
Starting NoRel heuristic
Found phase-1 solution: relaxation 43
Elapsed time for NoRel heuristic: 5s (best bound -2929)
Root relaxation presolved: 316466 rows, 255481 columns, 1539378 nonzeros

Deterministic concurrent LP optimizer: primal simplex, dual simplex, and barrier
Showing barrier log only...

Root barrier log...

Elapsed ordering time = 5s
Ordering time: 7.91s

Barrier statistics:
 Dense cols : 164
 AA' NZ     : 2.047e+06
 Factor NZ  : 2.424e+07 (roughly 300 MB of memory)
 Factor Ops : 1.078e+10 (less than 1 second per iteration)
 Threads    : 2

                  Objective                Residual
Iter       Primal          Dual         Primal    Dual     Compl     Time
   0  -4.37877401e+06 -1.79654500e+05  8.83e+04 4.74e-01  1.19e+02    45s
   1  -3.61075981e+06 -2.01107154e+05  7.28e+04 1.79e+00  9.42e+01    47s
   2  -2.41984693e+06 -2.24780141e+05  4.90e+04 1.38e+00  6.39e+01    48s
   3  -1.35186083e+06 -2.45871711e+05  2.77e+04 1.10e+00  3.65e+01    50s
   4  -8.48202531e+05 -2.46831081e+05  1.74e+04 9.90e-02  2.31e+01    52s
   5  -1.53976354e+05 -1.99765815e+05  3.18e+03 2.89e-02  4.63e+00    54s
   6  -6.72589930e+04 -1.23826170e+05  1.40e+03 1.06e-02  2.01e+00    56s
   7  -2.79071018e+04 -6.78221813e+04  5.91e+02 2.86e-03  8.40e-01    58s
   8  -1.69266395e+04 -4.25889627e+04  3.60e+02 1.32e-03  4.84e-01    60s
   9  -9.62387877e+03 -3.34571098e+04  2.07e+02 9.08e-04  3.02e-01    62s
  10  -5.93924665e+03 -2.43147747e+04  1.32e+02 5.49e-04  1.95e-01    63s
  11  -3.73242826e+03 -1.91942859e+04  8.68e+01 4.07e-04  1.37e-01    65s
  12  -1.94206600e+03 -1.21495681e+04  5.05e+01 2.85e-04  7.86e-02    66s
  13  -5.69723071e+02 -6.59385802e+03  2.27e+01 1.51e-04  3.75e-02    68s
  14   3.25498173e+02 -2.36625103e+03  4.53e+00 5.77e-05  1.25e-02    69s
  15   5.36103343e+02  2.31014038e+02  1.86e-01 1.22e-05  1.24e-03    71s
  16   5.44016584e+02  5.38791643e+02  9.80e-13 1.24e-06  2.04e-05    73s
  17   5.44000017e+02  5.43994792e+02  2.00e-12 9.50e-09  2.04e-08    74s
  18   5.44000000e+02  5.43999995e+02  2.70e-13 8.30e-12  2.04e-11    76s

Barrier solved model in 18 iterations and 75.96 seconds (30.79 work units)
Optimal objective 5.44000000e+02


Root crossover log...

    2409 DPushes remaining with DInf 0.0000000e+00                76s
       0 DPushes remaining with DInf 0.0000000e+00                77s

   52397 PPushes remaining with PInf 0.0000000e+00                77s
    8258 PPushes remaining with PInf 0.0000000e+00                80s
    4717 PPushes remaining with PInf 0.0000000e+00                85s
    2650 PPushes remaining with PInf 0.0000000e+00                90s
     766 PPushes remaining with PInf 0.0000000e+00                95s
       0 PPushes remaining with PInf 0.0000000e+00               100s

  Push phase complete: Pinf 0.0000000e+00, Dinf 3.7124361e-10    100s


Root simplex log...

Iteration    Objective       Primal Inf.    Dual Inf.      Time
   54796    5.4400000e+02   0.000000e+00   0.000000e+00    100s
Concurrent spin time: 0.01s

Solved with barrier
   54796    5.4400000e+02   0.000000e+00   0.000000e+00    100s

Use crossover to convert LP symmetric solution to basic solution...

Root crossover log...

   15445 DPushes remaining with DInf 0.0000000e+00               101s

   27464 PPushes remaining with PInf 0.0000000e+00               101s
    3278 PPushes remaining with PInf 0.0000000e+00               106s
    1720 PPushes remaining with PInf 0.0000000e+00               111s
     449 PPushes remaining with PInf 0.0000000e+00               115s
       0 PPushes remaining with PInf 0.0000000e+00               119s

  Push phase complete: Pinf 0.0000000e+00, Dinf 5.0340252e-10    119s


Root simplex log...

Iteration    Objective       Primal Inf.    Dual Inf.      Time
   82263    5.4400000e+02   0.000000e+00   0.000000e+00    119s
   82263    5.4400000e+02   0.000000e+00   0.000000e+00    120s

Root relaxation: objective 5.440000e+02, 82263 iterations, 86.57 seconds (39.73 work units)
Total elapsed time = 261.96s

    Nodes    |    Current Node    |     Objective Bounds      |     Work
 Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time

     0     0  544.00000    0 2318          -  544.00000      -     -  423s
     0     0  544.00000    0 2318          -  544.00000      -     -  428s
     0     0  544.00000    0  687          -  544.00000      -     -  666s
     0     2  544.00000    0  500          -  544.00000      -     -  924s
     1     4  544.00000    1 1327          -  544.00000      - 109622  937s
     3     8  544.00000    2 1117          -  544.00000      - 42513  944s
     7    12  544.00000    3  990          -  544.00000      - 20516  948s
    11    16  544.00000    4  876          -  544.00000      - 13404  950s
    19    24  544.00000    6  810          -  544.00000      -  8300  956s
    23    28  544.00000    7 1008          -  544.00000      -  7529  961s
    27    36  544.00000    8 1471          -  544.00000      -  7567  987s
    37   111  544.00000    8 1081          -  544.00000      -  7238 1013s
   114   327  544.00000   21  773          -  544.00000      -  2934 1044s
   334   541  544.00000   61  462          -  544.00000      -  1130 1065s
   554   697  544.00000  100  286          -  544.00000      -   705 1089s
   727   917  544.00000  140  316          -  544.00000      -   648 1114s
   782   918  544.00000  101  273          -  544.00000      -   624 1115s
   947  1044  544.00000  185  245          -  544.00000      -   541 1139s
  1153  1164  544.00000  172  302          -  544.00000      -   487 1162s
  1284  1191  544.00000  175  687          -  544.00000      -   492 1364s
  1285  1192  544.00000  213  687          -  544.00000      -   492 1365s
  1286  1192  544.00000   43 34110          -  544.00000      -   491 2281s
  1287  1193  544.00000   80 34110          -  544.00000      -   491 2799s
  1288  1194  544.00000  148 34110          -  544.00000      -   490 3243s
