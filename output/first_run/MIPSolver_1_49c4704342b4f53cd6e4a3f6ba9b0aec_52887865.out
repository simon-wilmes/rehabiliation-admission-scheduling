1.NAME: MIPSolver
2.PARAMS: {'use_lazy_constraints': True}
3.INSTANCE: /home/wx350715/Kobra/rehabiliation-admission-scheduling/data/comp_study_002/instance_5_30.txt
4.REPETITION: 1
Current directory: /home/wx350715/Kobra/rehabiliation-admission-scheduling
[34m2025-01-01 14:45:14,805 - DEBUG - Solver: <class 'src.solvers.mip.MIPSolver'>[0m
[34m2025-01-01 14:45:14,805 - DEBUG - Args: {'use_lazy_constraints': True}[0m
[34m2025-01-01 14:45:14,805 - DEBUG - File path /home/wx350715/Kobra/rehabiliation-admission-scheduling/data/comp_study_002/instance_5_30.txt[0m
[34m2025-01-01 14:45:14,829 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-01 14:45:14,829 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-01 14:45:14,829 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-01 14:45:14,829 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-01 14:45:14,829 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-01 14:45:14,829 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-01 14:45:14,829 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-01 14:45:14,829 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-01 14:45:14,829 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-01 14:45:14,829 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-01 14:45:14,829 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-01 14:45:14,829 - DEBUG - ADD RESOURCE_GROUPS[0m
[34m2025-01-01 14:45:14,829 - DEBUG - ADD RESOURCE_GROUPS[0m
[34m2025-01-01 14:45:14,830 - DEBUG - ADD RESOURCE_GROUPS[0m
[34m2025-01-01 14:45:14,830 - DEBUG - ADD RESOURCE_GROUPS[0m
[34m2025-01-01 14:45:14,830 - DEBUG - ADD RESOURCES[0m
[34m2025-01-01 14:45:14,830 - DEBUG - ADD RESOURCES[0m
[34m2025-01-01 14:45:14,830 - DEBUG - ADD RESOURCES[0m
[34m2025-01-01 14:45:14,830 - DEBUG - ADD RESOURCES[0m
[34m2025-01-01 14:45:14,830 - DEBUG - ADD RESOURCES[0m
[34m2025-01-01 14:45:14,830 - DEBUG - ADD RESOURCES[0m
[34m2025-01-01 14:45:14,830 - DEBUG - ADD RESOURCES[0m
[34m2025-01-01 14:45:14,830 - DEBUG - ADD RESOURCES[0m
[34m2025-01-01 14:45:14,830 - DEBUG - ADD RESOURCES[0m
[34m2025-01-01 14:45:14,831 - DEBUG - ADD RESOURCES[0m
[34m2025-01-01 14:45:14,831 - DEBUG - ADD TREATMENTS[0m
[34m2025-01-01 14:45:14,831 - DEBUG - ADD TREATMENTS[0m
[34m2025-01-01 14:45:14,831 - DEBUG - ADD TREATMENTS[0m
[34m2025-01-01 14:45:14,831 - DEBUG - ADD TREATMENTS[0m
[34m2025-01-01 14:45:14,831 - DEBUG - ADD TREATMENTS[0m
[34m2025-01-01 14:45:14,831 - DEBUG - ADD TREATMENTS[0m
[34m2025-01-01 14:45:14,831 - DEBUG - ADD TREATMENTS[0m
[34m2025-01-01 14:45:14,831 - DEBUG - ADD TREATMENTS[0m
[34m2025-01-01 14:45:14,832 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:14,832 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:14,832 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:14,832 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:14,832 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:14,832 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:14,832 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:14,832 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:14,832 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:14,833 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:14,833 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:14,833 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:14,833 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:14,833 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:14,833 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:14,833 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:14,833 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:14,833 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:14,834 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:14,834 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:14,834 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:14,834 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:14,834 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:14,834 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:14,834 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:14,834 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:14,836 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:14,836 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:14,836 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:14,836 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:14,836 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:14,836 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:14,836 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:14,837 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:14,837 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:14,837 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:14,837 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:14,837 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:14,837 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:14,837 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 14:45:14,837 - DEBUG - Instance data:[0m
[34m2025-01-01 14:45:14,838 - DEBUG - Number of patients: 40[0m
[34m2025-01-01 14:45:14,838 - DEBUG - Number of beds: 40[0m
[34m2025-01-01 14:45:14,838 - DEBUG - Average number of treatments per patient: 23.325[0m
[34m2025-01-01 14:45:14,838 - DEBUG - Average number of treatment per stayed day: 2.2004716981132075[0m
[34m2025-01-01 14:45:14,838 - DEBUG - Number of treatments: 933[0m
[34m2025-01-01 14:45:14,838 - DEBUG - Number of resources: 10[0m
[34m2025-01-01 14:45:14,838 - DEBUG - Number of resource groups: 4[0m
[34m2025-01-01 14:45:14,838 - DEBUG - Number of resource hours needed per all treatment by RG(therapists): 25.816666666666716[0m
[34m2025-01-01 14:45:14,838 - DEBUG - Number of resource hours needed per all treatment by RG(rooms): 48.36666666666666[0m
[34m2025-01-01 14:45:14,838 - DEBUG - Number of resource hours needed per all treatment by RG(physiotherapist): 15.5[0m
[34m2025-01-01 14:45:14,838 - DEBUG - Number of resource hours needed per all treatment by RG(sport_room): 6.75[0m
[32m2025-01-01 14:45:14,838 - INFO - {'solver': 'MIPSolver', 'args': {'use_lazy_constraints': True, 'enforce_min_treatments_per_day': True, 'enforce_max_treatments_per_e_w': True, 'enforce_min_patients_per_treatment': True, 'log_to_console': True}}[0m
[34m2025-01-01 14:45:14,838 - DEBUG - Setting options: MIPSolver[0m
[34m2025-01-01 14:45:14,838 - DEBUG -  ---- use_lazy_constraints to True[0m
[34m2025-01-01 14:45:14,838 - DEBUG - Setting options: Solver[0m
[34m2025-01-01 14:45:14,838 - DEBUG -  ---- number_of_threads to 4 (default)[0m
[34m2025-01-01 14:45:14,838 - DEBUG -  ---- treatment_value to 0 (default)[0m
[34m2025-01-01 14:45:14,838 - DEBUG -  ---- delay_value to 1 (default)[0m
[34m2025-01-01 14:45:14,838 - DEBUG -  ---- missing_treatment_value to 4 (default)[0m
[34m2025-01-01 14:45:14,838 - DEBUG -  ---- enforce_min_treatments_per_day to True[0m
[34m2025-01-01 14:45:14,838 - DEBUG -  ---- enforce_max_treatments_per_e_w to True[0m
[34m2025-01-01 14:45:14,838 - DEBUG -  ---- enforce_min_patients_per_treatment to True[0m
[34m2025-01-01 14:45:14,839 - DEBUG -  ---- log_to_console to True[0m
[34m2025-01-01 14:45:14,839 - DEBUG -  ---- log_to_file to True (default)[0m
[34m2025-01-01 14:45:14,839 - DEBUG -  ---- no_rel_heur_time to 1 (default)[0m
[32m2025-01-01 14:45:14,858 - INFO - Create model: MIPSolver[0m
Set parameter TSPort to value 50039
Set parameter TokenServer to value "license.itc.rwth-aachen.de"
Set parameter Threads to value 4
Set parameter Cuts to value 0
Set parameter NoRelHeurTime to value 1
Set parameter LazyConstraints to value 1
[34m2025-01-01 14:45:16,709 - DEBUG - Variables created.[0m
[34m2025-01-01 14:45:19,183 - DEBUG - Constraint (p1) created.[0m
[34m2025-01-01 14:45:19,511 - DEBUG - Constraint (when_admitted) created.[0m
[34m2025-01-01 14:45:19,685 - DEBUG - Constraint (p3) created.[0m
[34m2025-01-01 14:45:19,688 - DEBUG - Constraint (p4) created.[0m
[34m2025-01-01 14:45:19,688 - DEBUG - Constraint (p7) created.[0m
[34m2025-01-01 14:45:19,777 - DEBUG - Constraint (r3) created.[0m
[34m2025-01-01 14:45:20,683 - DEBUG - Constraint (r4) created.[0m
[34m2025-01-01 14:45:21,560 - DEBUG - Constraint (a1) created.[0m
[34m2025-01-01 14:45:21,629 - DEBUG - Constraint (a4) created.[0m
[34m2025-01-01 14:45:21,646 - DEBUG - Constraint (a5) created.[0m
[34m2025-01-01 14:45:21,665 - DEBUG - Constraint (a5) created.[0m
[34m2025-01-01 14:45:21,665 - DEBUG - Constraint (already_admitted) created.[0m
[32m2025-01-01 14:45:22,541 - INFO - Time to create model: 7.682[0m
[32m2025-01-01 14:45:22,541 - INFO - Solving model: MIPSolver[0m
Gurobi Optimizer version 10.0.0 build v10.0.0rc2 (linux64)

CPU model: Intel(R) Xeon(R) Platinum 8468, instruction set [SSE2|AVX|AVX2|AVX512]
Thread count: 96 physical cores, 96 logical processors, using up to 4 threads

Optimize a model with 364669 rows, 284618 columns and 1696353 nonzeros
Model fingerprint: 0x8458f421
Variable types: 2 continuous, 284616 integer (284616 binary)
Coefficient statistics:
  Matrix range     [1e+00, 1e+01]
  Objective range  [1e+00, 1e+01]
  Bounds range     [1e+00, 1e+00]
  RHS range        [1e+00, 4e+03]
Presolve removed 155691 rows and 97252 columns (presolve time = 5s) ...
Presolve removed 155691 rows and 98512 columns (presolve time = 10s) ...
Presolve removed 159731 rows and 98635 columns (presolve time = 15s) ...
Presolve removed 159689 rows and 98593 columns
Presolve time: 17.26s
Presolved: 204980 rows, 186025 columns, 971648 nonzeros
Variable types: 0 continuous, 186025 integer (185982 binary)
Starting NoRel heuristic
Found phase-1 solution: relaxation 120
Found phase-1 solution: relaxation 119
Found phase-1 solution: relaxation 118
Found phase-1 solution: relaxation 112
Root relaxation presolved: 204781 rows, 186224 columns, 958087 nonzeros

Deterministic concurrent LP optimizer: primal simplex, dual simplex, and barrier
Showing barrier log only...

Root barrier log...

Ordering time: 3.77s

Barrier statistics:
 Dense cols : 7
 AA' NZ     : 1.171e+06
 Factor NZ  : 1.022e+07 (roughly 140 MB of memory)
 Factor Ops : 3.184e+09 (less than 1 second per iteration)
 Threads    : 2

                  Objective                Residual
Iter       Primal          Dual         Primal    Dual     Compl     Time
   0  -2.74628855e+06 -3.51976950e+05  7.37e+04 1.48e+00  2.84e+02    30s
   1  -1.70994472e+06 -3.80583068e+05  4.59e+04 3.11e+00  1.80e+02    31s
   2  -1.20740781e+06 -3.97170194e+05  3.25e+04 2.37e+00  1.21e+02    32s
   3  -3.33821436e+05 -4.02970735e+05  9.15e+03 5.69e-01  3.60e+01    32s
   4  -9.58928044e+04 -2.92044129e+05  2.66e+03 1.21e-13  1.07e+01    33s
   5  -2.99855960e+04 -2.09581520e+05  8.51e+02 7.28e-14  3.87e+00    34s
   6  -1.11747980e+04 -1.19998349e+05  3.32e+02 6.71e-14  1.63e+00    36s
   7  -4.17273179e+03 -6.47745693e+04  1.37e+02 1.17e-13  7.09e-01    37s
   8  -8.25219834e+02 -3.64842099e+04  4.37e+01 6.92e-14  2.93e-01    38s
   9  -1.78134771e+02 -1.86199583e+04  2.49e+01 6.94e-14  1.43e-01    39s
  10   3.25591481e+02 -1.13505513e+04  1.06e+01 5.38e-14  7.72e-02    40s
  11   5.08123494e+02 -6.14828788e+03  5.58e+00 3.26e-14  4.10e-02    40s
  12   6.18639175e+02 -1.54072481e+03  2.32e+00 2.61e-14  1.27e-02    41s
  13   6.85962133e+02  7.56164312e+01  2.20e-01 2.27e-14  3.28e-03    42s
  14   6.88700579e+02  4.93373026e+02  8.37e-02 1.28e-14  1.05e-03    43s
  15   6.89028339e+02  5.79968811e+02  3.55e-02 8.21e-15  5.82e-04    44s
  16   6.88901500e+02  6.27353978e+02  2.27e-02 4.62e-15  3.29e-04    44s
  17   6.88788800e+02  6.33864156e+02  1.60e-02 5.37e-15  2.93e-04    45s
  18   6.88627022e+02  6.64521549e+02  9.57e-03 3.55e-15  1.29e-04    46s
  19   6.88384010e+02  6.80443744e+02  3.58e-03 3.55e-15  4.25e-05    47s
  20   6.88108106e+02  6.83043052e+02  3.12e-04 3.55e-15  2.67e-05    48s
  21   6.88032512e+02  6.87076277e+02  1.23e-04 7.11e-15  5.06e-06    49s
  22   6.88001712e+02  6.87987748e+02  1.95e-06 2.54e-14  7.39e-08    50s
  23   6.88000001e+02  6.87999989e+02  4.09e-10 2.20e-14  6.04e-11    51s

Barrier solved model in 23 iterations and 51.26 seconds (15.41 work units)
Optimal objective 6.88000001e+02


Root crossover log...

    2797 DPushes remaining with DInf 0.0000000e+00                52s
       0 DPushes remaining with DInf 0.0000000e+00                52s

   44881 PPushes remaining with PInf 0.0000000e+00                52s
    4551 PPushes remaining with PInf 0.0000000e+00                55s
    1405 PPushes remaining with PInf 0.0000000e+00                60s
     271 PPushes remaining with PInf 0.0000000e+00                65s
       0 PPushes remaining with PInf 0.0000000e+00                67s

  Push phase complete: Pinf 0.0000000e+00, Dinf 3.1479255e-10     67s


Root simplex log...

Iteration    Objective       Primal Inf.    Dual Inf.      Time
   47577    6.8800000e+02   0.000000e+00   0.000000e+00     67s
Concurrent spin time: 0.01s

Solved with barrier
   47577    6.8800000e+02   0.000000e+00   0.000000e+00     68s

Use crossover to convert LP symmetric solution to basic solution...

Root crossover log...

    6477 DPushes remaining with DInf 0.0000000e+00                68s

   28497 PPushes remaining with PInf 0.0000000e+00                69s
    2241 PPushes remaining with PInf 0.0000000e+00                70s
     437 PPushes remaining with PInf 0.0000000e+00                75s
       0 PPushes remaining with PInf 0.0000000e+00                79s

  Push phase complete: Pinf 0.0000000e+00, Dinf 3.0757711e-10     79s


Root simplex log...

Iteration    Objective       Primal Inf.    Dual Inf.      Time
   76077    6.8800000e+02   0.000000e+00   0.000000e+00     79s
   76077    6.8800000e+02   0.000000e+00   0.000000e+00     80s

Root relaxation: objective 6.880000e+02, 76077 iterations, 56.80 seconds (16.26 work units)

    Nodes    |    Current Node    |     Objective Bounds      |     Work
 Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time

     0     0  688.00000    0 22517          -  688.00000      -     -  182s
     0     0  688.00000    0 22517          -  688.00000      -     -  294s
     0     2  688.00000    0 22517          -  688.00000      -     -  622s
     1     4  688.00000    1 9980          -  688.00000      - 70664 1929s
     3     8  688.00000    2 6642          -  688.00000      - 77238 3132s
