1.NAME: MIPSolver
2.PARAMS: {'use_lazy_constraints': True}
3.INSTANCE: /home/wx350715/Kobra/rehabiliation-admission-scheduling/data/comp_study_002/instance_1_more_resources_30.txt
4.REPETITION: 1
Current directory: /home/wx350715/Kobra/rehabiliation-admission-scheduling
[34m2025-01-01 18:43:01,365 - DEBUG - Solver: <class 'src.solvers.mip.MIPSolver'>[0m
[34m2025-01-01 18:43:01,365 - DEBUG - Args: {'use_lazy_constraints': True}[0m
[34m2025-01-01 18:43:01,365 - DEBUG - File path /home/wx350715/Kobra/rehabiliation-admission-scheduling/data/comp_study_002/instance_1_more_resources_30.txt[0m
[34m2025-01-01 18:43:01,365 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-01 18:43:01,365 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-01 18:43:01,365 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-01 18:43:01,365 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-01 18:43:01,365 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-01 18:43:01,366 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-01 18:43:01,366 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-01 18:43:01,366 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-01 18:43:01,366 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-01 18:43:01,366 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-01 18:43:01,366 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-01 18:43:01,366 - DEBUG - ADD RESOURCE_GROUPS[0m
[34m2025-01-01 18:43:01,366 - DEBUG - ADD RESOURCE_GROUPS[0m
[34m2025-01-01 18:43:01,366 - DEBUG - ADD RESOURCE_GROUPS[0m
[34m2025-01-01 18:43:01,366 - DEBUG - ADD RESOURCE_GROUPS[0m
[34m2025-01-01 18:43:01,366 - DEBUG - ADD RESOURCES[0m
[34m2025-01-01 18:43:01,366 - DEBUG - ADD RESOURCES[0m
[34m2025-01-01 18:43:01,366 - DEBUG - ADD RESOURCES[0m
[34m2025-01-01 18:43:01,366 - DEBUG - ADD RESOURCES[0m
[34m2025-01-01 18:43:01,366 - DEBUG - ADD RESOURCES[0m
[34m2025-01-01 18:43:01,367 - DEBUG - ADD RESOURCES[0m
[34m2025-01-01 18:43:01,367 - DEBUG - ADD RESOURCES[0m
[34m2025-01-01 18:43:01,367 - DEBUG - ADD RESOURCES[0m
[34m2025-01-01 18:43:01,367 - DEBUG - ADD RESOURCES[0m
[34m2025-01-01 18:43:01,367 - DEBUG - ADD RESOURCES[0m
[34m2025-01-01 18:43:01,367 - DEBUG - ADD RESOURCES[0m
[34m2025-01-01 18:43:01,367 - DEBUG - ADD RESOURCES[0m
[34m2025-01-01 18:43:01,367 - DEBUG - ADD RESOURCES[0m
[34m2025-01-01 18:43:01,367 - DEBUG - ADD RESOURCES[0m
[34m2025-01-01 18:43:01,367 - DEBUG - ADD TREATMENTS[0m
[34m2025-01-01 18:43:01,367 - DEBUG - ADD TREATMENTS[0m
[34m2025-01-01 18:43:01,367 - DEBUG - ADD TREATMENTS[0m
[34m2025-01-01 18:43:01,367 - DEBUG - ADD TREATMENTS[0m
[34m2025-01-01 18:43:01,367 - DEBUG - ADD TREATMENTS[0m
[34m2025-01-01 18:43:01,368 - DEBUG - ADD TREATMENTS[0m
[34m2025-01-01 18:43:01,368 - DEBUG - ADD TREATMENTS[0m
[34m2025-01-01 18:43:01,368 - DEBUG - ADD TREATMENTS[0m
[34m2025-01-01 18:43:01,368 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,368 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,368 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,368 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,368 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,368 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,369 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,369 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,369 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,369 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,369 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,369 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,369 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,369 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,369 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,369 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,369 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,370 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,370 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,370 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,370 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,370 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,371 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,371 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,371 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,371 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,371 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,371 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,371 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,371 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,372 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,372 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,372 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,372 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,372 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,372 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,372 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,372 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,372 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,373 - DEBUG - ADD PATIENTS[0m
[34m2025-01-01 18:43:01,373 - DEBUG - Instance data:[0m
[34m2025-01-01 18:43:01,373 - DEBUG - Number of patients: 40[0m
[34m2025-01-01 18:43:01,373 - DEBUG - Number of beds: 40[0m
[34m2025-01-01 18:43:01,373 - DEBUG - Average number of treatments per patient: 29.525[0m
[34m2025-01-01 18:43:01,373 - DEBUG - Average number of treatment per stayed day: 2.135623869801085[0m
[34m2025-01-01 18:43:01,373 - DEBUG - Number of treatments: 1181[0m
[34m2025-01-01 18:43:01,373 - DEBUG - Number of resources: 12[0m
[34m2025-01-01 18:43:01,373 - DEBUG - Number of resource groups: 4[0m
[34m2025-01-01 18:43:01,373 - DEBUG - Number of resource hours needed per all treatment by RG(therapists): 38.3375[0m
[34m2025-01-01 18:43:01,373 - DEBUG - Number of resource hours needed per all treatment by RG(rooms): 74.50000000000004[0m
[34m2025-01-01 18:43:01,373 - DEBUG - Number of resource hours needed per all treatment by RG(physiotherapist): 26.0[0m
[34m2025-01-01 18:43:01,373 - DEBUG - Number of resource hours needed per all treatment by RG(sport_room): 18.9375[0m
[32m2025-01-01 18:43:01,373 - INFO - {'solver': 'MIPSolver', 'args': {'use_lazy_constraints': True, 'enforce_min_treatments_per_day': True, 'enforce_max_treatments_per_e_w': True, 'enforce_min_patients_per_treatment': True, 'log_to_console': True}}[0m
[34m2025-01-01 18:43:01,373 - DEBUG - Setting options: MIPSolver[0m
[34m2025-01-01 18:43:01,373 - DEBUG -  ---- use_lazy_constraints to True[0m
[34m2025-01-01 18:43:01,373 - DEBUG - Setting options: Solver[0m
[34m2025-01-01 18:43:01,373 - DEBUG -  ---- number_of_threads to 4 (default)[0m
[34m2025-01-01 18:43:01,373 - DEBUG -  ---- treatment_value to 0 (default)[0m
[34m2025-01-01 18:43:01,374 - DEBUG -  ---- delay_value to 1 (default)[0m
[34m2025-01-01 18:43:01,374 - DEBUG -  ---- missing_treatment_value to 4 (default)[0m
[34m2025-01-01 18:43:01,374 - DEBUG -  ---- enforce_min_treatments_per_day to True[0m
[34m2025-01-01 18:43:01,374 - DEBUG -  ---- enforce_max_treatments_per_e_w to True[0m
[34m2025-01-01 18:43:01,374 - DEBUG -  ---- enforce_min_patients_per_treatment to True[0m
[34m2025-01-01 18:43:01,374 - DEBUG -  ---- log_to_console to True[0m
[34m2025-01-01 18:43:01,374 - DEBUG -  ---- log_to_file to True (default)[0m
[34m2025-01-01 18:43:01,374 - DEBUG -  ---- no_rel_heur_time to 1 (default)[0m
[32m2025-01-01 18:43:01,392 - INFO - Create model: MIPSolver[0m
Set parameter TSPort to value 50039
Set parameter TokenServer to value "license.itc.rwth-aachen.de"
Set parameter Threads to value 4
Set parameter Cuts to value 0
Set parameter NoRelHeurTime to value 1
Set parameter LazyConstraints to value 1
[34m2025-01-01 18:43:04,094 - DEBUG - Variables created.[0m
[34m2025-01-01 18:43:08,036 - DEBUG - Constraint (p1) created.[0m
[34m2025-01-01 18:43:08,489 - DEBUG - Constraint (when_admitted) created.[0m
[34m2025-01-01 18:43:08,706 - DEBUG - Constraint (p3) created.[0m
[34m2025-01-01 18:43:08,709 - DEBUG - Constraint (p4) created.[0m
[34m2025-01-01 18:43:08,709 - DEBUG - Constraint (p7) created.[0m
[34m2025-01-01 18:43:08,798 - DEBUG - Constraint (r3) created.[0m
[34m2025-01-01 18:43:09,803 - DEBUG - Constraint (r4) created.[0m
[34m2025-01-01 18:43:10,994 - DEBUG - Constraint (a1) created.[0m
[34m2025-01-01 18:43:11,089 - DEBUG - Constraint (a4) created.[0m
[34m2025-01-01 18:43:11,113 - DEBUG - Constraint (a5) created.[0m
[34m2025-01-01 18:43:11,137 - DEBUG - Constraint (a5) created.[0m
[34m2025-01-01 18:43:11,137 - DEBUG - Constraint (already_admitted) created.[0m
[32m2025-01-01 18:43:12,393 - INFO - Time to create model: 11.001[0m
[32m2025-01-01 18:43:12,393 - INFO - Solving model: MIPSolver[0m
Gurobi Optimizer version 10.0.0 build v10.0.0rc2 (linux64)

CPU model: Intel(R) Xeon(R) Platinum 8468, instruction set [SSE2|AVX|AVX2|AVX512]
Thread count: 96 physical cores, 96 logical processors, using up to 4 threads

Optimize a model with 656644 rows, 529627 columns and 3196963 nonzeros
Model fingerprint: 0x519b4440
Variable types: 2 continuous, 529625 integer (529625 binary)
Coefficient statistics:
  Matrix range     [1e+00, 1e+01]
  Objective range  [1e+00, 1e+01]
  Bounds range     [1e+00, 1e+00]
  RHS range        [1e+00, 5e+03]
Presolve removed 257460 rows and 157028 columns (presolve time = 5s) ...
Presolve removed 257314 rows and 156882 columns
Presolve time: 8.23s
Presolved: 399330 rows, 372745 columns, 1957060 nonzeros
Variable types: 0 continuous, 372745 integer (372598 binary)
Starting NoRel heuristic
Found phase-1 solution: relaxation 50
Root relaxation presolved: 399104 rows, 372971 columns, 1936820 nonzeros

Deterministic concurrent LP optimizer: primal simplex, dual simplex, and barrier
Showing barrier log only...

Root barrier log...

Elapsed ordering time = 5s
Ordering time: 6.22s

Barrier statistics:
 Dense cols : 16
 AA' NZ     : 2.076e+06
 Factor NZ  : 2.060e+07 (roughly 250 MB of memory)
 Factor Ops : 8.021e+09 (less than 1 second per iteration)
 Threads    : 2

                  Objective                Residual
Iter       Primal          Dual         Primal    Dual     Compl     Time
   0  -4.85237644e+06 -1.01267317e+05  1.52e+05 5.71e-01  9.24e+01    23s
   1  -4.08221510e+06 -1.15285661e+05  1.28e+05 1.17e+00  6.93e+01    24s
   2  -1.86397197e+06 -1.27386777e+05  5.85e+04 3.78e-01  3.27e+01    25s
   3  -1.00536703e+06 -1.32492509e+05  3.16e+04 4.55e-02  1.82e+01    27s
   4  -1.97249888e+05 -1.02497455e+05  6.23e+03 3.81e-11  3.71e+00    28s
   5  -7.72487470e+04 -6.88114470e+04  2.46e+03 1.99e-11  1.49e+00    30s
   6  -4.41755561e+04 -4.93313498e+04  1.41e+03 8.75e-12  8.59e-01    32s
   7  -2.78612984e+04 -3.79332557e+04  8.99e+02 3.28e-12  5.51e-01    34s
   8  -1.78329205e+04 -2.66521845e+04  5.84e+02 1.08e-12  3.49e-01    36s
   9  -6.97203887e+03 -1.79161736e+04  2.44e+02 7.77e-12  1.65e-01    38s
  10  -2.35631033e+03 -1.16119461e+04  9.98e+01 4.63e-12  8.12e-02    39s
  11  -4.01127334e+02 -6.70974373e+03  3.87e+01 9.66e-13  3.94e-02    40s
  12   4.47745336e+02 -3.29434637e+03  1.21e+01 5.56e-13  1.82e-02    41s
  13   7.65387902e+02 -1.06900954e+03  2.11e+00 2.68e-13  7.60e-03    42s
  14   8.00949990e+02 -1.60911457e+01  9.45e-01 1.20e-13  3.34e-03    44s
  15   8.10375125e+02  5.08727748e+02  6.36e-01 3.02e-14  1.26e-03    45s
  16   8.30032862e+02  8.00562922e+02  3.72e-12 1.55e-14  1.15e-04    46s
  17   8.30000041e+02  8.29970557e+02  1.53e-12 7.77e-14  1.15e-07    48s
  18   8.30000000e+02  8.29999971e+02  1.71e-13 2.89e-14  1.15e-10    49s

Barrier solved model in 18 iterations and 49.20 seconds (22.27 work units)
Optimal objective 8.30000000e+02


Root crossover log...

    1576 DPushes remaining with DInf 0.0000000e+00                50s
       0 DPushes remaining with DInf 0.0000000e+00                50s

   55246 PPushes remaining with PInf 0.0000000e+00                50s
   32858 PPushes remaining with PInf 0.0000000e+00                50s
    6419 PPushes remaining with PInf 0.0000000e+00                55s
    3586 PPushes remaining with PInf 0.0000000e+00                60s
    1578 PPushes remaining with PInf 0.0000000e+00                66s
Concurrent spin time: 2.73s

Solved with dual simplex

Root simplex log...

Iteration    Objective       Primal Inf.    Dual Inf.      Time
   23488    8.3000000e+02   0.000000e+00   0.000000e+00     70s

Use crossover to convert LP symmetric solution to basic solution...

Root crossover log...

   10574 DPushes remaining with DInf 0.0000000e+00                70s

   15205 PPushes remaining with PInf 0.0000000e+00                70s
       0 PPushes remaining with PInf 0.0000000e+00                72s

  Push phase complete: Pinf 0.0000000e+00, Dinf 1.9009631e-10     72s


Root simplex log...

Iteration    Objective       Primal Inf.    Dual Inf.      Time
   38696    8.3000000e+02   0.000000e+00   0.000000e+00     73s
   38696    8.3000000e+02   0.000000e+00   0.000000e+00     73s

Root relaxation: objective 8.300000e+02, 38696 iterations, 61.16 seconds (25.07 work units)
Total elapsed time = 145.63s

    Nodes    |    Current Node    |     Objective Bounds      |     Work
 Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time

     0     0  830.00000    0 1879          -  830.00000      -     -  215s
     0     0  830.00000    0  166          -  830.00000      -     -  371s
     0     2  830.00000    0   90          -  830.00000      -     -  532s
     1     4  849.00000    1  611          -  832.00000      - 157192  538s
     3     8  849.00000    2  573          -  832.00000      - 56387  542s
     7    12  849.00000    3  485          -  832.00000      - 24710  545s
    19    24  849.00000    6  539          -  832.00000      -  9252  552s
    38    52  849.00000   10  459          -  832.00000      -  4661  559s
    51    60  849.00000   15  432          -  832.00000      -  3516  562s
    59    86  849.00000   16  395          -  832.00000      -  3065  569s
    85   135  849.00000   19  296          -  832.00000      -  2164  580s
   134   195  849.00000   32  202          -  832.00000      -  1394  597s
   208   242  849.00000   47  453          -  832.00000      -   965  614s
   248   261  849.00000   51  369          -  832.00000      -  1045  638s
