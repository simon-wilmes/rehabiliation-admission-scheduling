1.NAME: CPSolver
2.PARAMS: {'break_symmetry': True}
3.INSTANCE: /home/wx350715/Kobra/rehabiliation-admission-scheduling/data/comp_study_002/instance_1_less_prescriptions_15.txt
4.REPETITION: 1
Current directory: /home/wx350715/Kobra/rehabiliation-admission-scheduling
[34m2025-01-08 14:53:44,750 - DEBUG - Solver: <class 'src.solvers.cp_or.CPSolver'>[0m
[34m2025-01-08 14:53:44,750 - DEBUG - Args: {'break_symmetry': True}[0m
[34m2025-01-08 14:53:44,750 - DEBUG - File path /home/wx350715/Kobra/rehabiliation-admission-scheduling/data/comp_study_002/instance_1_less_prescriptions_15.txt[0m
[34m2025-01-08 14:53:44,765 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-08 14:53:44,765 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-08 14:53:44,765 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-08 14:53:44,765 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-08 14:53:44,765 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-08 14:53:44,766 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-08 14:53:44,766 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-08 14:53:44,766 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-08 14:53:44,766 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-08 14:53:44,766 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-08 14:53:44,766 - DEBUG - ADD INSTANCE DATA[0m
[34m2025-01-08 14:53:44,766 - DEBUG - ADD RESOURCE_GROUPS[0m
[34m2025-01-08 14:53:44,766 - DEBUG - ADD RESOURCE_GROUPS[0m
[34m2025-01-08 14:53:44,766 - DEBUG - ADD RESOURCE_GROUPS[0m
[34m2025-01-08 14:53:44,766 - DEBUG - ADD RESOURCE_GROUPS[0m
[34m2025-01-08 14:53:44,766 - DEBUG - ADD RESOURCES[0m
[34m2025-01-08 14:53:44,766 - DEBUG - ADD RESOURCES[0m
[34m2025-01-08 14:53:44,766 - DEBUG - ADD RESOURCES[0m
[34m2025-01-08 14:53:44,766 - DEBUG - ADD RESOURCES[0m
[34m2025-01-08 14:53:44,766 - DEBUG - ADD RESOURCES[0m
[34m2025-01-08 14:53:44,767 - DEBUG - ADD RESOURCES[0m
[34m2025-01-08 14:53:44,767 - DEBUG - ADD RESOURCES[0m
[34m2025-01-08 14:53:44,767 - DEBUG - ADD RESOURCES[0m
[34m2025-01-08 14:53:44,767 - DEBUG - ADD RESOURCES[0m
[34m2025-01-08 14:53:44,767 - DEBUG - ADD TREATMENTS[0m
[34m2025-01-08 14:53:44,767 - DEBUG - ADD TREATMENTS[0m
[34m2025-01-08 14:53:44,767 - DEBUG - ADD TREATMENTS[0m
[34m2025-01-08 14:53:44,767 - DEBUG - ADD TREATMENTS[0m
[34m2025-01-08 14:53:44,767 - DEBUG - ADD TREATMENTS[0m
[34m2025-01-08 14:53:44,767 - DEBUG - ADD TREATMENTS[0m
[34m2025-01-08 14:53:44,767 - DEBUG - ADD TREATMENTS[0m
[34m2025-01-08 14:53:44,767 - DEBUG - ADD TREATMENTS[0m
[34m2025-01-08 14:53:44,767 - DEBUG - ADD PATIENTS[0m
[34m2025-01-08 14:53:44,768 - DEBUG - ADD PATIENTS[0m
[34m2025-01-08 14:53:44,768 - DEBUG - ADD PATIENTS[0m
[34m2025-01-08 14:53:44,768 - DEBUG - ADD PATIENTS[0m
[34m2025-01-08 14:53:44,768 - DEBUG - ADD PATIENTS[0m
[34m2025-01-08 14:53:44,768 - DEBUG - ADD PATIENTS[0m
[34m2025-01-08 14:53:44,768 - DEBUG - ADD PATIENTS[0m
[34m2025-01-08 14:53:44,768 - DEBUG - ADD PATIENTS[0m
[34m2025-01-08 14:53:44,768 - DEBUG - ADD PATIENTS[0m
[34m2025-01-08 14:53:44,768 - DEBUG - ADD PATIENTS[0m
[34m2025-01-08 14:53:44,768 - DEBUG - ADD PATIENTS[0m
[34m2025-01-08 14:53:44,768 - DEBUG - ADD PATIENTS[0m
[34m2025-01-08 14:53:44,769 - DEBUG - ADD PATIENTS[0m
[34m2025-01-08 14:53:44,769 - DEBUG - ADD PATIENTS[0m
[34m2025-01-08 14:53:44,769 - DEBUG - ADD PATIENTS[0m
[34m2025-01-08 14:53:44,769 - DEBUG - ADD PATIENTS[0m
[34m2025-01-08 14:53:44,769 - DEBUG - ADD PATIENTS[0m
[34m2025-01-08 14:53:44,769 - DEBUG - ADD PATIENTS[0m
[34m2025-01-08 14:53:44,769 - DEBUG - ADD PATIENTS[0m
[34m2025-01-08 14:53:44,769 - DEBUG - ADD PATIENTS[0m
[34m2025-01-08 14:53:44,769 - DEBUG - Instance data:[0m
[34m2025-01-08 14:53:44,769 - DEBUG - Number of patients: 20[0m
[34m2025-01-08 14:53:44,769 - DEBUG - Number of beds: 40[0m
[34m2025-01-08 14:53:44,769 - DEBUG - Average number of treatments per patient: 22.05[0m
[34m2025-01-08 14:53:44,769 - DEBUG - Average number of treatment per stayed day: 1.5806451612903225[0m
[34m2025-01-08 14:53:44,770 - DEBUG - Number of treatments: 441[0m
[34m2025-01-08 14:53:44,770 - DEBUG - Number of resources: 9[0m
[34m2025-01-08 14:53:44,771 - DEBUG - Number of resource groups: 4[0m
[34m2025-01-08 14:53:44,771 - DEBUG - Number of resource hours needed per all treatment by RG(therapists): 19.395833333333332[0m
[34m2025-01-08 14:53:44,771 - DEBUG - Number of resource hours needed per all treatment by RG(rooms): 35.60833333333331[0m
[34m2025-01-08 14:53:44,771 - DEBUG - Number of resource hours needed per all treatment by RG(physiotherapist): 12.25[0m
[34m2025-01-08 14:53:44,771 - DEBUG - Number of resource hours needed per all treatment by RG(sport_room): 8.6875[0m
[32m2025-01-08 14:53:44,771 - INFO - {'solver': 'CPSolver', 'args': {'break_symmetry': True, 'max_repr': 'cumulative', 'min_repr': 'cumulative', 'enforce_min_treatments_per_day': True, 'enforce_max_treatments_per_e_w': True, 'enforce_min_patients_per_treatment': True, 'log_to_console': True}}[0m
[34m2025-01-08 14:53:44,771 - DEBUG - Setting options: CPSolver[0m
[34m2025-01-08 14:53:44,771 - DEBUG -  ---- break_symmetry to True[0m
[34m2025-01-08 14:53:44,771 - DEBUG -  ---- min_repr to cumulative[0m
[34m2025-01-08 14:53:44,771 - DEBUG -  ---- max_repr to cumulative[0m
[34m2025-01-08 14:53:44,771 - DEBUG -  ---- add_knowledge to True (default)[0m
[34m2025-01-08 14:53:44,771 - DEBUG - Setting options: Solver[0m
[34m2025-01-08 14:53:44,771 - DEBUG -  ---- number_of_threads to 1 (default)[0m
[34m2025-01-08 14:53:44,771 - DEBUG -  ---- treatment_value to 0 (default)[0m
[34m2025-01-08 14:53:44,771 - DEBUG -  ---- delay_value to 1 (default)[0m
[34m2025-01-08 14:53:44,771 - DEBUG -  ---- missing_treatment_value to 4 (default)[0m
[34m2025-01-08 14:53:44,771 - DEBUG -  ---- enforce_min_treatments_per_day to True[0m
[34m2025-01-08 14:53:44,771 - DEBUG -  ---- enforce_max_treatments_per_e_w to True[0m
[34m2025-01-08 14:53:44,771 - DEBUG -  ---- enforce_min_patients_per_treatment to True[0m
[34m2025-01-08 14:53:44,771 - DEBUG -  ---- log_to_console to True[0m
[34m2025-01-08 14:53:44,771 - DEBUG -  ---- log_to_file to True (default)[0m
[32m2025-01-08 14:53:44,796 - INFO - Create model: CPSolver[0m
[32m2025-01-08 14:53:45,724 - INFO - Symmetry is being broken[0m
[32m2025-01-08 14:53:45,769 - INFO - Time to create model: 0.972[0m
[32m2025-01-08 14:53:45,769 - INFO - Solving model: CPSolver[0m

Starting CP-SAT solver v9.11.4210
Parameters: log_search_progress: true num_search_workers: 1

Initial optimization model '': (model_fingerprint: 0x2d77455bb058f5eb)
#Variables: 12'620 (#bools: 5'298 #ints: 20 in objective)
  - 7'403 Booleans in [0,1]
  - 3 in [-10000,100000]
  - 1 in [0,10]
  - 1 in [0,14]
  - 296 in [0,923]
  - 18 in [0,924]
  - 4'880 in [0,1056]
  - 1 in [1,4]
  - 1 in [1,6]
  - 1 in [1,7]
  - 1 in [2,5]
  - 1 in [2,8]
  - 2 in [3,8]
  - 2 in [4,8]
  - 1 in [4,10]
  - 1 in [5,9]
  - 1 in [5,10]
  - 1 in [6,10]
  - 1 in [6,11]
  - 1 in [7,12]
  - 1 in [7,13]
  - 1 in [8,12]
  - 1 in [11,14]
#kBoolOr: 7'395 (#enforced: 7'395) (#literals: 7'395)
#kCumulative: 59 (#intervals: 25220, #optional: 15458, #variable_sizes: 9742)
#kInterval: 32'833 (#enforced: 22'861) (#fixed: 210)
#kLinMax: 18 (#expressions: 36)
#kLinear1: 41
#kLinear2: 10'937 (#enforced: 10'596)
#kLinear3: 102
#kLinearN: 1'163 (#terms: 23'486)
#kNoOverlap: 29 (#intervals: 7317, #optional: 7107, #fixed_intervals: 210)

Starting presolve at 0.02s
  7.88e-03s  0.00e+00d  [DetectDominanceRelations] 
  9.61e-02s  0.00e+00d  [PresolveToFixPoint] #num_loops=3 #num_dual_strengthening=2 
  9.27e-04s  0.00e+00d  [ExtractEncodingFromLinear] #potential_supersets=583 
[Symmetry] Graph for symmetry has 107'603 nodes and 202'053 arcs.
[Symmetry] Symmetry computation done. time: 0.0488586 dtime: 0.115882
[Symmetry] #generators: 4, average support size: 352
[Symmetry] 424 orbits with sizes: 4,4,4,4,4,4,4,4,4,4,...
[Symmetry] Num fixable by intersecting at_most_one with orbits: 3 largest_orbit: 4
[Symmetry] Found orbitope of size 140 x 4
[SAT presolve] num removable Booleans: 0 / 7350
[SAT presolve] num trivial clauses: 0
[SAT presolve] [0s] clauses:7560 literals:18826 vars:7344 one_side_vars:3122 simple_definition:4002 singleton_clauses:0
[SAT presolve] [0.000403s] clauses:7560 literals:18826 vars:7344 one_side_vars:3122 simple_definition:4002 singleton_clauses:0
[SAT presolve] [0.000675575s] clauses:7560 literals:18826 vars:7344 one_side_vars:3122 simple_definition:4002 singleton_clauses:0
  3.55e-03s  0.00e+00d  [DetectDuplicateConstraintsWithDifferentEnforcements] 
  1.75e+01s  2.96e-01d  [Probe] #probed=16'258 #new_binary_clauses=134'958 
  4.31e-02s  0.00e+00d  [MaxClique] Merged 7413(16336 literals) into 5386(25259 literals) at_most_ones. 
  7.63e-03s  0.00e+00d  [DetectDominanceRelations] 
  5.05e-02s  0.00e+00d  [PresolveToFixPoint] #num_loops=1 #num_dual_strengthening=1 
  6.67e-03s  0.00e+00d  [ProcessAtMostOneAndLinear] 
  3.98e-03s  0.00e+00d  [DetectDuplicateConstraints] 
  3.80e-03s  0.00e+00d  [DetectDuplicateConstraintsWithDifferentEnforcements] 
  1.30e-01s  2.32e-03d  [DetectDominatedLinearConstraints] #relevant_constraints=733 #num_inclusions=484 
  1.39e-03s  0.00e+00d  [DetectDifferentVariables] 
  4.26e-03s  2.33e-04d  [ProcessSetPPC] #relevant_constraints=6'561 #num_inclusions=3'296 
  1.15e-03s  0.00e+00d  [FindAlmostIdenticalLinearConstraints] 
  7.79e-02s  2.86e-01d  [FindBigAtMostOneAndLinearOverlap] 
  1.23e-02s  1.43e-01d  [FindBigVerticalLinearOverlap] 
  2.84e-03s  1.18e-02d  [FindBigHorizontalLinearOverlap] #linears=445 
  1.38e-03s  1.62e-05d  [MergeClauses] 
  7.27e-03s  0.00e+00d  [DetectDominanceRelations] 
  4.85e-02s  0.00e+00d  [PresolveToFixPoint] #num_loops=1 #num_dual_strengthening=1 
  7.50e-03s  0.00e+00d  [DetectDominanceRelations] 
  4.85e-02s  0.00e+00d  [PresolveToFixPoint] #num_loops=1 #num_dual_strengthening=1 
[Symmetry] Graph for symmetry has 103'190 nodes and 202'963 arcs.
[Symmetry] Symmetry computation done. time: 0.0268403 dtime: 0.0562304
[Symmetry] #generators: 1, average support size: 568
[Symmetry] 284 orbits with sizes: 2,2,2,2,2,2,2,2,2,2,...
[Symmetry] Num fixable by intersecting at_most_one with orbits: 1 largest_orbit: 2
[SAT presolve] num removable Booleans: 0 / 7344
[SAT presolve] num trivial clauses: 0
[SAT presolve] [0s] clauses:4427 literals:11750 vars:4599 one_side_vars:1577 simple_definition:2855 singleton_clauses:0
[SAT presolve] [0.000344735s] clauses:4427 literals:11750 vars:4599 one_side_vars:1577 simple_definition:2855 singleton_clauses:0
[SAT presolve] [0.000673767s] clauses:4427 literals:11750 vars:4599 one_side_vars:1577 simple_definition:2855 singleton_clauses:0
  3.42e-03s  0.00e+00d  [DetectDuplicateConstraintsWithDifferentEnforcements] 
  1.73e+01s  3.03e-01d  [Probe] #probed=16'256 #new_binary_clauses=134'958 
  2.93e-02s  0.00e+00d  [MaxClique] Merged 4826(22181 literals) into 4826(22185 literals) at_most_ones. 
  7.28e-03s  0.00e+00d  [DetectDominanceRelations] 
  4.92e-02s  0.00e+00d  [PresolveToFixPoint] #num_loops=1 #num_dual_strengthening=1 
  6.51e-03s  0.00e+00d  [ProcessAtMostOneAndLinear] 
  3.97e-03s  0.00e+00d  [DetectDuplicateConstraints] 
  3.84e-03s  0.00e+00d  [DetectDuplicateConstraintsWithDifferentEnforcements] 
  1.28e-01s  2.32e-03d  [DetectDominatedLinearConstraints] #relevant_constraints=733 #num_inclusions=484 
  1.36e-03s  0.00e+00d  [DetectDifferentVariables] 
  3.80e-03s  2.14e-04d  [ProcessSetPPC] #relevant_constraints=6'001 #num_inclusions=2'736 
  1.51e-03s  0.00e+00d  [FindAlmostIdenticalLinearConstraints] 
  7.67e-02s  2.86e-01d  [FindBigAtMostOneAndLinearOverlap] 
  1.24e-02s  1.43e-01d  [FindBigVerticalLinearOverlap] 
  2.83e-03s  1.18e-02d  [FindBigHorizontalLinearOverlap] #linears=445 
  1.59e-03s  1.62e-05d  [MergeClauses] 
  7.46e-03s  0.00e+00d  [DetectDominanceRelations] 
  4.93e-02s  0.00e+00d  [PresolveToFixPoint] #num_loops=1 #num_dual_strengthening=1 
  7.51e-03s  0.00e+00d  [DetectDominanceRelations] 
  4.96e-02s  0.00e+00d  [PresolveToFixPoint] #num_loops=1 #num_dual_strengthening=1 
[Symmetry] Graph for symmetry has 103'189 nodes and 202'959 arcs.
[Symmetry] Symmetry computation done. time: 0.0221409 dtime: 0.055882
[SAT presolve] num removable Booleans: 0 / 7343
[SAT presolve] num trivial clauses: 0
[SAT presolve] [0s] clauses:4427 literals:11750 vars:4599 one_side_vars:1577 simple_definition:2855 singleton_clauses:0
[SAT presolve] [0.000326382s] clauses:4427 literals:11750 vars:4599 one_side_vars:1577 simple_definition:2855 singleton_clauses:0
[SAT presolve] [0.000646327s] clauses:4427 literals:11750 vars:4599 one_side_vars:1577 simple_definition:2855 singleton_clauses:0
  3.63e-03s  0.00e+00d  [DetectDuplicateConstraintsWithDifferentEnforcements] 
  1.76e+01s  3.03e-01d  [Probe] #probed=16'256 #new_binary_clauses=134'958 
  2.85e-02s  0.00e+00d  [MaxClique] Merged 4826(22181 literals) into 4826(22185 literals) at_most_ones. 
  7.90e-03s  0.00e+00d  [DetectDominanceRelations] 
  5.15e-02s  0.00e+00d  [PresolveToFixPoint] #num_loops=1 #num_dual_strengthening=1 
  6.85e-03s  0.00e+00d  [ProcessAtMostOneAndLinear] 
  4.41e-03s  0.00e+00d  [DetectDuplicateConstraints] 
  4.10e-03s  0.00e+00d  [DetectDuplicateConstraintsWithDifferentEnforcements] 
  1.28e-01s  2.32e-03d  [DetectDominatedLinearConstraints] #relevant_constraints=733 #num_inclusions=484 
  1.52e-03s  0.00e+00d  [DetectDifferentVariables] 
  4.04e-03s  2.14e-04d  [ProcessSetPPC] #relevant_constraints=6'001 #num_inclusions=2'736 
  1.51e-03s  0.00e+00d  [FindAlmostIdenticalLinearConstraints] 
  7.53e-02s  2.86e-01d  [FindBigAtMostOneAndLinearOverlap] 
  1.27e-02s  1.43e-01d  [FindBigVerticalLinearOverlap] 
  2.99e-03s  1.18e-02d  [FindBigHorizontalLinearOverlap] #linears=445 
  1.53e-03s  1.62e-05d  [MergeClauses] 
  8.24e-03s  0.00e+00d  [DetectDominanceRelations] 
  5.15e-02s  0.00e+00d  [PresolveToFixPoint] #num_loops=1 #num_dual_strengthening=1 
  3.63e-03s  0.00e+00d  [ExpandObjective] #entries=22'250 #tight_variables=3'073 #tight_constraints=560 #expands=54 

Presolve summary:
  - 9812 affine relations were detected.
  - rule 'TODO dual: only one blocking constraint?' was applied 180 times.
  - rule 'affine: new relation' was applied 9'812 times.
  - rule 'at_most_one: transformed into max clique.' was applied 1 time.
  - rule 'bool_and: x => x' was applied 53 times.
  - rule 'bool_or: implications' was applied 7'395 times.
  - rule 'cumulative: max profile is always under the min capacity' was applied 1 time.
  - rule 'deductions: 4706 stored' was applied 1 time.
  - rule 'dual: fix variable' was applied 2 times.
  - rule 'enforcement: false literal' was applied 7 times.
  - rule 'exactly_one: removed literals' was applied 4 times.
  - rule 'intervals: change duplicate index across constraints' was applied 9'314 times.
  - rule 'intervals: removed unused interval' was applied 316 times.
  - rule 'lin_max: affine_max target domain reduced' was applied 18 times.
  - rule 'lin_max: fixed affine_max target' was applied 18 times.
  - rule 'linear1: always true' was applied 20 times.
  - rule 'linear: always true' was applied 10'192 times.
  - rule 'linear: divide by GCD' was applied 1 time.
  - rule 'linear: empty' was applied 1 time.
  - rule 'linear: extracted enforcement literal' was applied 72 times.
  - rule 'linear: fixed or dup variables' was applied 5'335 times.
  - rule 'linear: negative clause' was applied 224 times.
  - rule 'linear: negative equal one' was applied 506 times.
  - rule 'linear: positive at most one' was applied 77 times.
  - rule 'linear: reduced variable domains' was applied 4'902 times.
  - rule 'linear: remapped using affine relations' was applied 9'168 times.
  - rule 'linear: simplified rhs' was applied 6'403 times.
  - rule 'linear: singleton column' was applied 1 time.
  - rule 'linear: variable substitution 0' was applied 1 time.
  - rule 'no_overlap: removed absent intervals' was applied 4 times.
  - rule 'objective: expanded via tight equality' was applied 54 times.
  - rule 'presolve: 28 unused variables removed.' was applied 1 time.
  - rule 'presolve: iteration' was applied 3 times.
  - rule 'setppc: bool_or in at_most_one.' was applied 560 times.
  - rule 'symmetry: fixed all but one to false in orbitope row' was applied 3 times.
  - rule 'symmetry: fixed to false in general orbit' was applied 1 time.
  - rule 'variables: canonicalize affine domain' was applied 1 time.
  - rule 'variables: canonicalize domain' was applied 4'878 times.

Presolved optimization model '': (model_fingerprint: 0xb40b856d9ff6ab40)
#Variables: 7'657 (#bools: 4'488 #ints: 18 in objective)
  - 7'343 Booleans in [0,1]
  - 3 in [0,2]
  - 4 in [0,3]
  - 6 in [0,4]
  - 3 in [0,5]
  - 1 in [0,9]
  - 1 in [0,13]
  - 296 in [0,923]
#kAtMostOne: 569 (#literals: 13'667)
#kBoolAnd: 295 (#enforced: 295) (#literals: 4'552)
#kBoolOr: 170 (#literals: 3'236)
#kCumulative: 58 (#intervals: 25200, #optional: 15458, #variable_sizes: 9742)
#kExactlyOne: 560 (#literals: 3'073)
#kInterval: 23'196 (#enforced: 22'558) (#fixed: 28)
#kLinear1: 436 (#enforced: 436)
#kLinear2: 5'150 (#enforced: 4'862)
#kLinearN: 445 (#enforced: 72) (#terms: 15'490)
#kNoOverlap: 29 (#intervals: 7310, #optional: 7100, #fixed_intervals: 210)

Preloading model.
#Bound  54.07s best:inf   next:[-16188,1843] initial_domain
[Symmetry] Graph for symmetry has 74'901 nodes and 175'563 arcs.
[Symmetry] Symmetry computation done. time: 0.0176515 dtime: 0.0479384

Starting search at 54.10s with 1 workers.
1 full problem subsolver: [main]

[Encoding] 0 literals associated to VAR >= value, and 436 half-associations.
[Precedences] num_relations=4862 num_clauses=730
[Probing] deterministic_time: 0.331292 (limit: 1) wall_time: 24.6819 (8075/8075)
[Probing]  - new binary clause: 126686
[EncodingLinearRelaxation] #tight_equality:0 #loose_equality:0 #inequality:296
[LinearRelaxationBeforeCliqueExpansion] #linear:1385 #at_most_ones:1075
[FinalLinearRelaxation] #linear:1362 #cut_generators:0
Initial num_bool: 8075
#Bound  78.96s best:inf   next:[-1412,1843] main

Starting subsolver 'main' hint search at 78.96s
Starting subsolver 'main' search at 78.96s
#Bound  79.00s best:inf   next:[-52,1843] main
#Bound  79.01s best:inf   next:[0,1843]   main
